<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.9.5">Jekyll</generator><link href="http://blog.lupuse.org/feed.xml" rel="self" type="application/atom+xml" /><link href="http://blog.lupuse.org/" rel="alternate" type="text/html" /><updated>2025-10-29T19:33:26+00:00</updated><id>http://blog.lupuse.org/feed.xml</id><title type="html">LupusE webLife</title><subtitle>Ein Platz fuer geistige Ejakulationen und bedeutungsschwangere Worte.</subtitle><author><name>Benjamin Moeller</name></author><entry><title type="html">OSSDRLabs - Chameleon Ultra</title><link href="http://blog.lupuse.org/experimente/2025/10/29/ossdrlabs-chameleon-ultra.html" rel="alternate" type="text/html" title="OSSDRLabs - Chameleon Ultra" /><published>2025-10-29T19:03:22+00:00</published><updated>2025-10-29T19:03:22+00:00</updated><id>http://blog.lupuse.org/experimente/2025/10/29/ossdrlabs-chameleon-ultra</id><content type="html" xml:base="http://blog.lupuse.org/experimente/2025/10/29/ossdrlabs-chameleon-ultra.html"><![CDATA[<h1 id="a-brief-history">A brief history</h1>

<p>RRG is well known for their Proxmark3 as RFID multitool. In mid of 2023 they are releasing a new RFID tool, the Chameleon Ultra.</p>

<p>At first the project looks very promissing. A functional firmware for a few core features and a technical whitepaper, which shows the potential. After a few firmware upgrades the project went quiet for almost 2 years.</p>

<p>The Chameleon Ultra got its popularity because of the modern USB-C interface and Bluetooth connection and all in a very small form factor.<br />
On the other hand, a young developer, known as GameTech_Live who is not related to RRG, provided a GUI across all major platforms, right from the beginning. The User was able to read, dump and load cards into slots. No complicated CLI commands or compilation processes.</p>

<h2 id="what-the-chameleon-ultra-isnt">What the Chameleon Ultra isn’t</h2>
<p>Often the Chameleon Ultra was misunderstood as new Proxmark3. But the used nRF52840 chip is not able to sniff. The Antenna is not (easily) replaceable.<br />
There are some basic attacks, based on known weakness of the LF RFID or HF NFC, implemented by the community. But it is still a basic field tool to emulate cards. It is not a tool for analysis or cracking.</p>

<h2 id="why-to-buy-a-chameleon-ultra">Why to buy a Chameleon Ultra?</h2>
<p>Some readers are more time sensitive. You can dump a card with a Proxmark3 or Flipper Zero, but the emulation won’t work. In the past the workaround was to write the dump to a T5577 card and read this one to get access.<br />
And here the Chameleon Ultra shines. The Emulation is faster than any other known RFID tool, nearly as fast as a mobile phone NFC emulation. You can store up to 8 LF and 8 HF Cards (16 in total) to one Chameleon Ultra. So you don’t need a bunch of T5577 cards in the field, anymore. To be fair, only if the card is already implemented in the CU firmware.</p>

<h1 id="getting-started">Getting started</h1>
<p>If you bought a Chameleon Ultra and want to start, the first place to go is the technical Whitepaper at https://github.com/RfidResearchGroup/ChameleonUltra/wiki/technical_whitepaper<br />
Here you can see all supported cards and a few which are not supported by the hardware.</p>

<p>Either you start to load the GU GUI from https://github.com/GameTec-live/ChameleonUltraGUI and click a bit around, or you start manually:</p>

<ol>
  <li>Clone from Github <code class="language-plaintext highlighter-rouge">git clone https://github.com/RfidResearchGroup/ChameleonUltra</code></li>
  <li>Change to the path <code class="language-plaintext highlighter-rouge">cd ChameleonUltra/software/src; mkdir out; cd out</code></li>
  <li>Compile the CLI <code class="language-plaintext highlighter-rouge">cmake .. &amp;&amp; cmake --build . --config Release</code></li>
</ol>

<p>Now you can open the CLI with:</p>

<ol>
  <li>Change to the path <code class="language-plaintext highlighter-rouge">cd ../script</code></li>
  <li>Start the CLI <code class="language-plaintext highlighter-rouge">./chameleon_cli_main.py</code></li>
</ol>

<p>In the program you are starting offline. Change it with the  command <code class="language-plaintext highlighter-rouge">hw connect</code>. In general the CU is autodetected, but you can chose the port manually with <code class="language-plaintext highlighter-rouge">-p</code>, like:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Offline] chameleon --&gt; &lt;b&gt;hw connect -p /dev/ttyACM0&lt;/b&gt;
 { Chameleon Ultra connected: v2.1 }
[USB] chameleon --&gt; 
</code></pre></div></div>

<p>The CLI has a lot of popups/tooltips. The RFID low frequency commands starting with <code class="language-plaintext highlighter-rouge">lf</code>. The NFC commands are starting with <code class="language-plaintext highlighter-rouge">hf</code>. Everything Chameleon Ultra hardware related is in <code class="language-plaintext highlighter-rouge">hw</code>.<br />
Most commands are with tab completion, it bocomes tricky with arguments and parameters.</p>

<h2 id="cli-commands">CLI commands</h2>

<h3 id="read-iso14443-a-card">Read ISO14443-a card</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[USB] chameleon --&gt; hf 14a scan
- UID  : B60A0DDA
- ATQA : 0400 (0x0004)
- SAK  : 08

[USB] chameleon --&gt; hf 14a info
- UID  : B60A0DDA
- ATQA : 0400 (0x0004)
- SAK  : 08
- Guessed type(s) from SAK: MIFARE Classic 1K | Plus SE 1K | Plug S 2K | Plus X 2K
- Mifare Classic technology
  # Prng: Weak
</code></pre></div></div>

<h3 id="change-led-from-christmas-tree-to-casualh2">Change LED from christmas tree to casual&lt;/h2&gt;</h3>
<p><code class="language-plaintext highlighter-rouge">hw settings animation -m MINIMAL</code>
For even more stealth mode there is:
<code class="language-plaintext highlighter-rouge">hw settings animation -m NONE</code></p>

<h3 id="change-ble-pairing-key">Change BLE Pairing key</h3>
<p>The default BLE Key is 12345. The CU is waiting for a connection as soon as it wakes up. It is highly recommended to change this key!<br />
<code class="language-plaintext highlighter-rouge">hw settings blekey -k 250891</code> (Birthday of Linux)</p>

<h3 id="emulate-a-entry-card">Emulate a entry card</h3>
<ol>
  <li>Activate slot <code class="language-plaintext highlighter-rouge">hw slot change -s 4</code></li>
  <li>Enable the LF slot <code class="language-plaintext highlighter-rouge">hw slot enable --lf</code></li>
  <li>Enable <code class="language-plaintext highlighter-rouge">lf hid prox econfig --slot 4 --format H10301 --cn 123 --fc 210</code></li>
</ol>]]></content><author><name>Benjamin Moeller</name></author><category term="experimente" /><category term="produkte" /><category term="chameleon ultra" /><category term="ossdrlabs" /><summary type="html"><![CDATA[A brief history]]></summary></entry><entry><title type="html">SpitzAX - Router im Wohnmobil</title><link href="http://blog.lupuse.org/wohnmobil/2024/11/03/router-im-wohnmobil.html" rel="alternate" type="text/html" title="SpitzAX - Router im Wohnmobil" /><published>2024-11-03T07:35:32+00:00</published><updated>2024-11-03T07:35:32+00:00</updated><id>http://blog.lupuse.org/wohnmobil/2024/11/03/router-im-wohnmobil</id><content type="html" xml:base="http://blog.lupuse.org/wohnmobil/2024/11/03/router-im-wohnmobil.html"><![CDATA[<p>Vor ein paar Monaten habe ich mit der Firma <a href="https://www.gl-inet.com/">GL.iNet</a> an einer Verbesserung des Marketing gearbeitet. Als Kompensation gab es Rabatt auf einen <a href="https://www.gl-inet.com/products/gl-x3000/">Spitz AX (GL-X3000)</a>.<br />
Diesen Router hatte ich schon länger ins Auge gefasst, aber 400 Euro sind mir einfach zu viel Geld, auch wenn vergleichbare Produkte anderer Hersteller mehr kosten. Daher kam mir der Rabatt entgegen.</p>

<h2 id="der-router">Der Router</h2>

<p>Der Router bietet 2+4 (2x Wifi6 (PR-SMA), 4x 5G (SMA)) Buchsen. Es werden passende Antennen mitgeliefert, durch die schraubbaren Antennen kann, ohne am Router zu basteln, ein Dome oder andere Aussenantenne genutzt werden. Siehe Produktseite.</p>

<p>Er bietet 2 SIM Slots, mit automatischen Failover (wenn ein Anbieter nicht erreichbar ist, springt er zur zweiten Karte) oder manuellen Umschalten (9-17h Firmen Datenkarte, ansonsten die private Datenkarte). Anstelle von 2 SIM-Karten kann als Failover eine SIM Karte zusätzlich zum WLAN des Campingplatz genutzt werden, oder andersrum. Die Konfigurationsmöglichkeiten sind vielfältig. Dank MIMO kann die gesamte Sende/Empfangsleistung für beste Anbindung genutzt werden, oder die Antennen tleilen sich das externe und interne Netz auf. Voll atomatisch.</p>

<p>Wie alle GL.iNet Router bietet er VPN Unterstützung zu mehr als 30 Anbieter. Ich selbst nutze nur mein Heimnetzwerk als Gegenstelle, mit einem zusätzlichen GL.iNet Router zuhause.</p>

<p>Das Betriebssystem läuft auf Basis von OpenWrt, die nicht properitären Teile sind als Opensource verfügbar und können angepasst werden. Sicherheitslücken werden im Backport gepatched und offen kommuniziert.</p>

<h3 id="features">Features</h3>
<ul>
  <li>WLAN mit den Standards a/b/g/n/ac/ax (Wifi6)</li>
  <li>512 GB RAM und 8 GB Speicher, also ausreichend Platz für Erweiterungen</li>
  <li>RJ45 WAN mit bis zu 2,5Gbps, falls man doch einmal im Ferienhaus mit Glasfaster ist</li>
  <li>RJ45 LAN mit bis zu 1000Mbps um einen Laptop ohne WLAN zu versorgen</li>
  <li>Micro SD Karten Slot for bis zu 1 TB zusätzlichen Speicher</li>
  <li>
    <p>5 diskrete Status LED (Power, 5G Wifi, 2,4G Wifi, Internet, Mobile Signalstärke)</p>
  </li>
  <li>Stromstecker: DC5521, 12V/2.5A (5.5*2.1mm)</li>
  <li>Stromverbrauch: &lt; 14 W</li>
</ul>

<h2 id="der-einbau">Der Einbau</h2>

<h3 id="vorgeschichte">Vorgeschichte</h3>

<p>Ich habe meinem Kontakt bei GL.iNet versprochen Photos vom Einbau zu schicken. Leider kam einiges dazwischen, so verzögerte sich der Einbau von Woche zu Woche.<br />
Dann kam der Tag, an dem ich auf eine Firmenveranstaltung musste und kein Zimmer mehr frei war. Also fuhr ich mit dem Wohnmobil und meine Frau kam mit. Endlich wollte ich den Router einbauen, damit die in der Zwischenzeit streamen kann.<br />
Es war kalt, ich war müde, ich bastelte am Strom rum. Also Panel auf, ich entschied mich den vorhandenen Anschluss des TV abzugreifen, den wir nur selten benutzen. Der hat eine 5A Sicherung, perfekt. Kabel verbunden, alles wieder zu gemacht und Router angeschlossen. Ein kurzes grün und aus. Verdammt. Aber es war auch deulich leiser als vorher. Der halbe Wohnbereich war aus, keine Heizung, kein Kühlschrank, kein TV … Verdammt! Ich wollte meiner Frau nicht erzählen dass wir mirgen losfahren und sie keine Heizung hat. Es war immernoch kalt, aber die Müdigkeit war dem Adrenalin gewichen …</p>

<p>Nach einigem Messen und Suchen habe ich unter dem Fahrersitz, im Elektroblock, die passende Sicherung gefunden und die war durch. Also gegen eine neue 10A Sicherung getauscht und zumindest der Wohnbereich war wieder hergestellt.<br />
Noch etwas genervt und wieder müde habe ich dem GL.iNet Kontakt geschrieben dass sich aus diesem Grund die Dokumentation noch etwas verschiebt.</p>

<p>Womit ich nicht gerechnet habe:<br />
Auf der anderen Seite der Erde hat er seinen Technikern davon erzält und die meinten das ist typisch bei einer falschen Polung.<br />
In der Tat habe ich das Kabel aus meiner Restekiste und es war nicht beschriftet. Ich habe Plus- und Minuspol geraten … Verdammt!</p>

<h3 id="der-richtige-einbau">Der richtige Einbau</h3>

<p>Letztes Wochennende war es dann so weit, ich war ausgeschlafen und habe viel gelernt.</p>

<p>Zunächst wird nachgemessen wie die echte Polaität am original Netzteil ist. Einfach in die Steckdose und ein Voltmeter anschliessen.<br />
<img src="/media/router_spitzax_rv/router_spitzax_rv_1.JPG" alt="Kontrollmessung mit GL.iNet original Netzteil" /></p>

<p>Der Pluspol ist innen, 12,2 V. Nichts überraschendes.</p>

<p>In der Regel gibt es hinter dem Kontrollfeld genügend Anschlüsse. Bei uns ist das große graue Feld einfach nur eingeclipt und kann ohne Werkzeug abgezogen werden.</p>

<p><img src="/media/router_spitzax_rv/router_spitzax_rv_2.JPG" alt="Das Kontrollfeld am Eingang" /></p>

<p>Und so sieht es geöffnet aus<br />
<img src="/media/router_spitzax_rv/router_spitzax_rv_3.JPG" alt="Das Kontrollfeld offen" /></p>

<p>Am unteren Rannd sehen wir einen grauen Klotz mit einer Halterung für eine Glassicherung. Hier ist der Fernseher angeschlossen. Vertrauen ist gut, Kontrolle muss sein!</p>

<p><img src="/media/router_spitzax_rv/router_spitzax_rv_4.JPG" alt="13,2V, das ist unser Anschlusspunkt" /></p>

<p>Und weil ich die Erfahung bereits gemacht habe, vor dem Zusammenbau wird nochmal direkt am Stecker gemessen. 13,2V am Stecker, Pluspol in der Mitte, perfekt.</p>

<p><img src="/media/router_spitzax_rv/router_spitzax_rv_5.JPG" alt="13,2V am Stecker, Pluspol in der Mitte" /></p>

<p>Es ist an dieser Stelle auch nicht schlimm dass das Voldmeter am original Netzteil 12,2 V und am Wohnmobil 13,2 V anzeigt. Der SpitzAX ist nach Datenblatt für 9-36 Volt ausgelegt.<br />
Wohnmobil Batterien geben in der Regel eine Spannung von 13-14V ab, dieser Router kann mit der Schwankung also umgehen.</p>

<p>… und fertig!!<br />
<img src="/media/router_spitzax_rv/router_spitzax_rv_6.JPG" alt="SpitzAX im Wohnmobil" /></p>

<p>Leider habe ich über ide Zeit meine Montageplatte verlegt. Damit wird der Router noch an die Wand geklebt.<br />
Der SpitzAX selbst ist recht kompakt. Grüßer als die anderen Reiserouter, aber er kann auch deutlich mehr. Mit dne Antennen ist er sehr mächtig.<br />
Auch wnen es verlockend ist die Antennen um 90° zu winkeln und an dem Dach lang zu führen, für die besten Empfangswerte sollten die Antennen vertikal stehen, nicht horizontal.<br />
Die Wellen breiten sich omnidirektional vom Sender aus, je paralleler die Antennen stehen desto besser. Zum Glück ist es egal ob nach oben oder unten zeigend.</p>

<p>Jetzt werde ich es ein paar Fahrten testen und weiter berichten.</p>]]></content><author><name>Benjamin Moeller</name></author><category term="Wohnmobil" /><category term="dogliner" /><category term="spitz ax" /><category term="GL-X3000" /><summary type="html"><![CDATA[Vor ein paar Monaten habe ich mit der Firma GL.iNet an einer Verbesserung des Marketing gearbeitet. Als Kompensation gab es Rabatt auf einen Spitz AX (GL-X3000). Diesen Router hatte ich schon länger ins Auge gefasst, aber 400 Euro sind mir einfach zu viel Geld, auch wenn vergleichbare Produkte anderer Hersteller mehr kosten. Daher kam mir der Rabatt entgegen.]]></summary></entry><entry><title type="html">Flipper Zero - CLI und IR</title><link href="http://blog.lupuse.org/experimente/2024/09/11/flipper_zero-cli_und_ir.html" rel="alternate" type="text/html" title="Flipper Zero - CLI und IR" /><published>2024-09-11T23:02:32+00:00</published><updated>2024-09-11T23:02:32+00:00</updated><id>http://blog.lupuse.org/experimente/2024/09/11/flipper_zero-cli_und_ir</id><content type="html" xml:base="http://blog.lupuse.org/experimente/2024/09/11/flipper_zero-cli_und_ir.html"><![CDATA[<p>Seit geraumer Zeit ist der kleine Flipper Zero nun mein treuer Begleiter. Ich habe viel gelernt über verschiedenste Wege der Datenübertragung.</p>

<p>Auch über Menschen, aber das wollte ich nie. Der Flipper ist weiterhin kein magischer Zauberstab um alle Türen und Tore zu öffnen.<br />
Je besser ich ein Protokoll verstehe, desto ehe rhabe ich eine Chance zu verstehen wie ich eine Tür öffne, oder eben warum ich das nicht kann. Und warum ärgert es mich nicht, wenn ich mein Garagentor nicht mit einem 200 Euro Multi-Protokol-Tool öffnen kann? Dann kann es auch kein anderer, es ist in dem Bereich sicher.</p>

<h2 id="infrarot-im-generellen">Infrarot im Generellen</h2>

<p>Die erste Anlaufstelle um Infrarot-Signale zu bekommen ist die Flipper-IRDB. Dabei gibt es drei Hauptquellen:</p>
<ul>
  <li>https://github.com/UberGuidoZ/Flipper-IRDB ist ein Fork von:</li>
  <li>https://github.com/logickworkshop/Flipper-IRDB ist ien Fork von:</li>
  <li>https://github.com/Lucaslhm/Flipper-IRDB</li>
</ul>

<p>Man kann nicht wissen wo jemand aktuell etwas hochgeladen hat, aber die drei Quellen gleichen sich sehr zeitnah ab. Innerhalb einer Woche sollte jede Datei auf allen drei Quellen verfügbar sein. Ich persänlich lade bei der Basis Lucaslhm hoch.</p>

<p>Diese Datenbank ist bereits sehr mächtig. Oft liest man aber in den Foren und im Discord ‘Ich habe die Fernbedienung für xyz verloren’. Diese Anfragen ignoriere ich in der Regel, was interessiert mich ein 10e LED streifen, kauf halt neu.<br />
In einigen Fällen findet sich in der DB eine ähnliche Datei. Vom gleichen Hersteller oder anderes Label und ähnliche Bezeichnung. Dann kann man das Gerät ein/aus schalten, aber noch nicht die Farben wechseln. Wie im folgenden Beispiel:</p>

<h2 id="infrarot-im-speziellen-dualtron">Infrarot im speziellen: Dualtron</h2>

<p>Jemand fragt an, ob wer eine Fernbedienung für eine <code class="language-plaintext highlighter-rouge">dualtron ultra 2</code> hat. In der IRDB gibt es die <code class="language-plaintext highlighter-rouge">dualtron victor</code>. An/Aus geht, aber keine Farben.<br />
Also gehe ich auf https://github.com/Lucaslhm/Flipper-IRDB und gebe bei ‘Go to file’ ein: dualtron. Ich bekomme die Datei Dualtron_Victor_Handlebar_Lights.ir als Ergebnis.<br />
Vom User weis ich bereits, dass ‘POWER’ geht, also schaue ich mir diesen Button in der Datei an:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>name: POWER
type: parsed
protocol: NEC
address: 00 00 00 00
command: 07 00 00 00
</code></pre></div></div>

<p>NEC ist ein sehr einfaches Protokoll. 16 bit Adresse und Komando, bestehend aus 8 bit+8 bit logical inversed. Daher reicht in der Datei 8 bit <code class="language-plaintext highlighter-rouge">command: 07</code>.<br />
Die Adresse ist hier mit 00 angegeben, das ist nicht ungewöhnlich bei billigen Produkten. Es wird halt als Adresse 16 bit 00000000 11111111 gesendet.</p>

<p>Ich könnte mich nun darauf konzentrieren, dass 07 ein bekanntes Kommando ist und den nahen Bereich als Buttons in einer IR File anlegen.<br />
Oder ich weis das ich nur 255 Werte im Hex Bereich habe und schreibe mir eine Schleife zum Testen der 255 Werte von 00 bis FF:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>!/bin/bash

for command in {0..255}
do
    hexcmd=$(printf "%02d" $(echo "obase=16;$command" |bc)) 
    echo "Send \"ir tx NEC 00 $hexcmd\" to /dev/ttyACM0"
    echo -e "ir tx NEC 00 $hexcmd" &gt;&gt; /dev/ttyACM0
    sleep 5
done
</code></pre></div></div>

<ol>
  <li>Ich lasse den Zahlenbereich 00 bis 255 durchlaufen.  <code class="language-plaintext highlighter-rouge">for command in {0..255}; do ...; done</code></li>
  <li>Zunächst konvertiere ich die Zahl in einen Hexadezimalen Wert <code class="language-plaintext highlighter-rouge">$(echo "obase=16;$command" |bc)</code>, die führende Null nicht vergessen! <code class="language-plaintext highlighter-rouge">$(printf "%02d" ...)</code></li>
  <li>Dann gebe ich mir auf dem Bildschim aus was ich gerade mache. <code class="language-plaintext highlighter-rouge">echo "Send \"ir tx NEC 00 $hexcmd\" to /dev/ttyACM0"</code></li>
  <li>Zu guter Letzt wird der Befehl an den Flipper gesendet. <code class="language-plaintext highlighter-rouge">echo -e "ir tx NEC 00 $hexcmd" &gt;&gt; /dev/ttyACM0</code></li>
  <li>Ja, das Sleep ist notwendig, damit ich auch noch rechtzeitig reagieren kann und keine unkontrollierte Disco erzeuge. Bei 07 z.B. muss ich die Chance haben den IR Sender zu verdecken oder das Gerät wieder einzuschalten vor 08.</li>
</ol>

<h2 id="ein-bischen-rechnen-mathematik-ist-das-noch-nicht">Ein bischen rechnen (Mathematik ist das noch nicht)</h2>

<p>Dieses funktioniert nur, bei Protokollen mit 2x8 bit Kommandos.<br />
Wenn ich ein 16 bit Kommando habe, muss ich den Wertebereich entsprechend von 0000 auf FFFF erweitern. 65535 * 5 Sekunden (91 Stunden) macht nicht mehr so viel Spass. Ich muss die ganze Zeit dabei bleiben, da es über das Protokolle kein Feedback gibt. Zum Vergleich sind es bei 255 Variationen * 5 Sekunden gerade mal 21 Minuten, wenn ich auf 3 Sekunden Sleep gehe 12 Minuten. Diese Optimierung benötigt bei FFFF noch immer 54 Stunden.</p>

<p>Erinnert Ihr Euch noch was ich oben zum Thema ‘Protokolle verstehen’ geschrieben habe? Das war kein Scherz, man sollte wissen wann man sich der Komplexität geschlagen gibt.</p>]]></content><author><name>Benjamin Moeller</name></author><category term="experimente" /><category term="produkte" /><category term="flipper zero" /><summary type="html"><![CDATA[Seit geraumer Zeit ist der kleine Flipper Zero nun mein treuer Begleiter. Ich habe viel gelernt über verschiedenste Wege der Datenübertragung.]]></summary></entry><entry><title type="html">Wohnmobilinternet</title><link href="http://blog.lupuse.org/wohnmobil/2024/06/12/wohnmobilinternet.html" rel="alternate" type="text/html" title="Wohnmobilinternet" /><published>2024-06-12T20:42:01+00:00</published><updated>2024-06-12T20:42:01+00:00</updated><id>http://blog.lupuse.org/wohnmobil/2024/06/12/wohnmobilinternet</id><content type="html" xml:base="http://blog.lupuse.org/wohnmobil/2024/06/12/wohnmobilinternet.html"><![CDATA[<p>Erreichbar über das Internet im Urlaub?<br />
Auch wenn es so edel klingt digitales detoxing zu betreiben, ich denke keiner möchte ernsthaft auf diesen kleinen Luxus verzichten. Denn selbst bei Hotels und Ferienwohnungen wird darauf geachtet, dass WLAN verfügbar ist. So auch auf dem Campingplatz.</p>

<h2 id="das-wohnmobil-und-der-strom">Das Wohnmobil und der Strom</h2>

<p>Im mobilen Heim auf 4 Rädern sind grundsätzlich zu wenig Steckdosen. Und dann dort wo man sie nicht benötigt.<br />
Als wir 2020 unser neustes 4-Pfoten-Mobile gekauft haben, da war ich zuerst sehr angetan. Eine Steckdose über dem Fahrersitz, eine unter der Sitzecke, eine hinter dem Fernseher im Eingang, eine im Bad und eine hinten bei den Betten. Aber um ehrlich zu sein nutzen wir 230V Landstrom selten. Wir stehen eher autark.<br />
Hinter dem TV und über den Betten waren je ein 12V Stecker, welche über die Bordbatterie versorgt wurden. Die Zeiten von 12V-KFZ-Steckern ist definitiv vorbei, daher habe ich daraus je eine Doppel-USB-Steckdose gemacht. Und bin glücklich. An den Betten werden oft Switch oder Mobiltelefon geladen, vorne am TV steckt die meiste Zeit ein Uhrenladekabel (Garmin) und nach Bedarf ein Router.</p>

<p>Um diese Router soll es heute gehen.</p>

<h2 id="kleine-geräteübersicht">Kleine Geräteübersicht</h2>

<p>Mein Lieblingsrouter ist weiterhin (ich hatte schon geschrieben) der <a href="https://www.gl-inet.com/products/gl-ar300m/">GL-iNet Shadow (GL-AR300M-Ext)</a>. Am USB Port benötigt er 5V/1A und bietet dafür 2.4 GHz WLAN. Dabei kann ich sowohl eine Verbindung zum Campingplatz-Netz (WAN) aufbauen als auch ein eigenes im Mobil (LAN) bereitstellen. Am Laptop mit Strommessgerät sehe ich einen Verbrauch von 5,1V auf 0,18A. Weniger als 2 Watt laut Datenblatt. 33 Euro.<br />
Bei der letzten Tour hatte ich meinen Shadow verlegt, aber meinen <a href="https://www.gl-inet.com/products/gl-a1300/">Slate Plus (GL-A1300)</a> dabei. Lange Zeit habe ich mich nicht getraut, da ich aus dem Forum weiss dass es beim falschen Netzteil zu Verbindungsabbrüchen und Einfrieren kommen kann. Ich wollte gar nicht wissen was das am Wohnmobil Bordnetz auslöst … Aber nun war ich neugierig, immerhin habe ich eine USB Multimeter dabei. 5,1V auf 1,2A kurzzeitig beim Boot, dann um die 0,5A, je nach Nutzung des Netzwerk. 17h durchgängig, ohne Unterbrechnung. Weniger als 6,5 Watt laut Datenblatt. Das mitgelieferte 5V/3A Netzteil schreckt doch mehr ab als es müsste. 90 Euro.</p>

<p>Jetzt habe ich mir einen <a href="https://www.gl-inet.com/products/gl-x3000/">Spitz AX (GL-X3000)</a> bestellt. Dieses Modell hat einen angegeben Verbrauch von 14 Watt. Aber bietet dafür 6 Antennen: 2 für WLAN (MIMO) und 4 für 5G LTE GPS und so weiter. Es ist nicht auf USB 5 Volt, sondern man kann ihn angeblich zwischen 9 und 36 Volt betreiben. Vermutlich wäre hier die KFZ-Steckdose noch sinnvoll gewesen. 580 Euro.</p>

<p>Was mir an der <a href="https://www.gl-inet.com/products/">Produktpalette von GL.iNet</a> gefällt, ist das breite Portfolio. Man bekommt für verschiedenes Geld verschiedene Ausstattungen. Alle oben beschriebenen Router machen am Ende nahezu das selbe, nur unterschiedlich schnell.</p>

<h2 id="vpn-server">VPN Server</h2>

<p>Zugegeben ist es nun gedanklich ein kleiner Sprung, aber ich nutze die GL.iNet Router hauptsächlich aus einem Grund: Ich will sicher in öffentlichen Netzwerken sein.</p>

<p>Bei der Einrichtung kann man mit 2 Techniken aus 30 Anbietern für VPN wählen. Unterstützt werden immer das neuere WireGuard und das bewährte OpenVPN. Manche Modelle bieten das flexiblere Tor als dritte Option des Tunnel an. Ich nutze keinen externen Anbieter. Da ich zuhause eine 500 MBit Glasfaser Leitung habe, steht dort mein Endpunkt unter meiner Kontrolle.</p>

<p>Dafür suche ich mir einen GL.iNet Router aus, den ich zuhause stehen haben will.</p>

<h3 id="die-auswahl-des-servers">Die Auswahl des Servers</h3>

<ul>
  <li><a href="https://www.gl-inet.com/products/gl-mt2500/">Brumme 2 (GL-MT2500)</a> - Ein Gerät ohne WLAN, sehr kompakt und schnell dank 2,5 GBit Ethernet Port. Etwa 90 Euro</li>
  <li><a href="https://www.gl-inet.com/products/gl-mt300n-v2/">Mango (GL-MT300N-V2)</a> - Der schmalere Shadow, mit WLAN aber ohne externe Antennen.</li>
  <li><a href="https://www.gl-inet.com/products/gl-axt1800/">Slate AX (GL-AXT1800)</a> - Kompakt, Wi-Fi 6, Leistungsstark. Etwa 130 Euro.</li>
  <li><a href="https://www.gl-inet.com/products/gl-mt6000/">Flint 2 (GL-MT6000)</a> - Ein vollwertiger Routerersatz für zuhause. Sicher eine Option, wenn die Fritz!Box oder ähnliches ausgetauscht werden soll. 160 Euro</li>
  <li><a href="https://www.gl-inet.com/products/gl-b3000/">Marble (GL-B3000)</a> - Kommt bald. Ein schöner Router, der auch als Bilderrahmen genutzt werden kann.</li>
</ul>

<p>Alternativen:</p>
<ul>
  <li>Selbstgebaut mit Linux/*BSD VM oder Mini-Installation … Das hatte ich mal, aber ist zu viel Aufwand.</li>
  <li>Wie oben genannt, einen von 30 Anbietern dafür bezahlen.
Eine Auswahl an Anbietern und wie man sie benutzt ist zu finden unter https://docs.gl-inet.com/router/en/4/interface_guide/wireguard_client/ und https://docs.gl-inet.com/router/en/4/interface_guide/openvpn_client/</li>
</ul>

<h3 id="den-vpn-server-aufstellen">Den VPN Server aufstellen</h3>

<p>Meine Wahl fiel auf den Slate AX, der zwar sehr vielseitig ist, aber für unterwegs doch ein bisschen zu gross. Wenn der Marble raus kommt wird der sicher ersetzt.</p>

<ol>
  <li>Strom am Slate AX</li>
  <li>Ethernet-Kabel vom LAN an das WAN des Slate AX</li>
  <li>Kabel vom Slate AX LAN zum Laptop/PC oder per WLAN und den Zugangsdaten auf dme Etikett unten per Smartphone/Tablet verbinden.</li>
</ol>

<p>Im generellen ist es ohne Einschränkungen möglich sich per Smartphone/Tablet zu verbinden. Doch leider stellt sich Android so intelligent dar, dass eine Verbindung ohne Internet nicht geroutet wird, wenn eine andere Verbindung (z.B. mobile Daten) besteht. Um auf die Administrationsoberfläche zu kommen muss also kurzzeitig ‘Mobile Daten’ oder ähnlich deaktiviert werden. Das ist kein Problem der GL.iNet Router, weil die würden jede Anfrage annehmen und beantworten.<br />
Wenn das WAN Kabel gesteckt ist und der Router eine IP und ein Gateway zugewiesen bekommen hat, dann besteht das zuvor genannte Problem nicht. Eventuell muss man einen kleinen Moment warten.</p>

<h3 id="die-vpn-server-einrichtung">Die VPN Server Einrichtung</h3>

<p>Jeder GL.iNet Router wird mit der IP 192.168.8.1/24 ausgeliefert. Zwar ist bekannt, dass eine IP in einem Netzwerk nur einmal vergeben sein darf, eher unbekannt ist, dass genauso ein Netzwerk in einem VPN nur einmal existieren darf.<br />
Ich empfehle zuerst auf der Administrationsseite (http://192.168.8.1) links im Menü unter ‘Netzwerk - LAN’ die IP zu ändern, z.B. auf 192.168.9.1. Danach sollte der Router einmal neu gestartet werden, wenn er nicht über die IP http://192.168.9.1 erreichbar ist, den Client auch neu verbinden.</p>

<p>Nach der erneuten Anmeldung am Router geht man links im Menü auf ‘VPN - WireGuard Server’. Die Übersetzung ‘Konfiguration erzeugen’ aus dem Englischen ‘Generate Configuration’ wird aktuell überarbeitet und ist in Zukunft sicher besser.<br />
Wenn der GL.iNet Router nicht direkt im Internet ist, muss auf dem Hauptrouter der hier angezeigte Port (Standard: 51820) weitergeleitet werden (Port Forwarding).<br />
Weiter oben gibt es den Reiter ‘Profile’, über den die Konfiguration für die Gegenstellen erstellt wird. Mit dem Button ‘Hinzufügen’ wird im Dialog ein Name angegeben, zum Beispiel ‘Wohnmobil’. Ich empfehle den Schalter ‘Benutze eine DDNS Domain’ zu aktivieren, wenn die Erreichbarkeit des Servers aus dem Internet nicht über andere Wege sichergestellt ist.<br />
In dem Dialog erscheint nun ein QR Code, der in der GL.iNet App photografiert werden kann um die Verbindung herzustellen, oder man läd sich die Konfiguration mit dme Button ‘Herunterladen’ auf den Computer oder das Smartphone um es später, bei Verbindung auf dem entfernten Router, wieder hochzuladen. Dieser Dialog kann jederzeit wieder aufgerufen werden.</p>

<h2 id="vpn-client">VPN Client</h2>

<p>Der Client muss nicht so leistungsfähig sein. Für einen mittelklasse Router spricht allerdings, dass er mit 2 Netzen (2,4 GHz für Camplingplatz/WAN und 5 GHz für Wohnmobil (LAN)) mit wenigen interferenzen arbeiten kann. Das 2,4 GHz WLAN hat eine bessere Reichweite, wärend das 5 GHz WLAN deutlich schneller ist. Im Wohnmobil ist die Netztrennung aber effektiver als der Vorteil der Geschwindigkeit.</p>

<h3 id="die-vpn-client-einrichtung">Die VPN Client Einrichtung</h3>

<p>Ich empfehle die IP Änderung auch auf dem Client vorzunehmen. Wenn nicht zu erwarten ist, dass weitere Clients dazu kommen, sollte der Standard von 192.168.8.1 ausreichend sein.<br />
Ansonsten: Auf der Administrationsseite (http://192.168.8.1) links im Menü unter ‘Netzwerk - LAN’ die IP zu ändern, z.B. auf 192.168.7.1. Danach sollte der Router einmal neu gestartet werden, wenn er nicht über die IP http://192.168.7.1 erreichbar ist, den Client auch neu verbinden.<br />
Der Client benötigt keine Portweiterleitung, da er nur eine Verbindung nach außen aufbaut.</p>

<p>Nach der erneuten Anmeldung am Router geht man links im Menü auf ‘VPN - WireGuard Client’. Mit dem + wird ein neue neue Verbindung angelegt und das zuvor erstellte Profil hochgeladen.</p>

<h2 id="nachsatz">Nachsatz</h2>

<p>Einige GL.iNet Router haben einen <a href="https://docs.gl-inet.com/router/en/4/interface_guide/toggle_button_settings/">kleinen Schalter</a> an der Seite, mit dem man das VPN ein oder aus stellen kann. Diesen würde ich auf jedne Fall einrichten, es geht schneller damit einmal kurz das VPN neu zu starten als über die Adminoberfläche ohne Internet auf dem Mobiltelefon.</p>

<p>In der Praxis gibt es viele Versuche der Anbieter VPN zu erkennen und zu unterbinden. Deutlich häufiger in Hotels als auf dem Campingplatz, aber es kommt vor. Wenn das Aufbauen eines VPN beim 2. Versuch einfach nicht funktioniert, dann schalte ich den Router ab und mache Urlaub.<br />
Ich würde meinen Laptops oder das Mobiltelefon nicht ungesichert in ein Camping-Netz stellen. Denn wenn ich langeweile bei schlechtem Wetter habe, dann bin ich selbst jemand der schaut wie viel man denn ‘auf der Leitung’ sieht.</p>]]></content><author><name>Benjamin Moeller</name></author><category term="wohnmobil" /><category term="wohnmobil" /><category term="router" /><summary type="html"><![CDATA[Erreichbar über das Internet im Urlaub? Auch wenn es so edel klingt digitales detoxing zu betreiben, ich denke keiner möchte ernsthaft auf diesen kleinen Luxus verzichten. Denn selbst bei Hotels und Ferienwohnungen wird darauf geachtet, dass WLAN verfügbar ist. So auch auf dem Campingplatz.]]></summary></entry><entry><title type="html">Flipper Zero vs. Logitech Unifying</title><link href="http://blog.lupuse.org/experimente/2023/07/27/flipper_vs_logitech.html" rel="alternate" type="text/html" title="Flipper Zero vs. Logitech Unifying" /><published>2023-07-27T22:38:03+00:00</published><updated>2023-07-27T22:38:03+00:00</updated><id>http://blog.lupuse.org/experimente/2023/07/27/flipper_vs_logitech</id><content type="html" xml:base="http://blog.lupuse.org/experimente/2023/07/27/flipper_vs_logitech.html"><![CDATA[<p>Ich versuche nach Möglichkeit meine Hardware Up-to-date zu halten. Ich finde es doof, wenn ein Firmwareupdater nur für Windows verfügbar ist. Wenn ich Zugriff auf ein Windows habe, dann installiere ich in der Regel die Logitech Unifying Software und schaue nach ob alle Geräte aktuell sind. Das geht dank USB in der Regel schnell.<br />
Vor einiger Zeit gab es in den News zuerst die Info, dass die Logitech Presenter anfällig sind, später wurde herausgefunden dass der verwendete Chip nRF24LU1+ von <a href="https://www.nordicsemi.com/">Nordic Semiconductor</a> auch in vielen Unifying Dongles zu finden ist. Logitech hat schnell ein Firmwareupdate zugesagt und geliefert.<br />
Durch den ersten Absatz dachte ich das ist genug. Wenn dem so wäre, hätte ich diesen Text nicht verfasst.</p>

<p>Kurz: Im Jahre 2016 haben Forscher herausgefunden, dass es per Funk extrem doof ist die Tastatureingaben zu verschlüsseln, die Maus aber unverschlüsselt einzubinden. Dazu noch, wenn die gesendeten Eingaben nicht nach Quelle verifiziert werden.<br />
Die Forschung sieht so aus: <a href="https://github.com/BastilleResearch/mousejack#flash-a-logitech-unifying-dongle-back-to-the-original-firmware">GitHub - BastilleResearch/mousejack</a> … Das ist im Jahre 2023 kein Thema mehr, oder? Oder?</p>

<h1 id="wie-sicher-ist-gefühlte-sicherheit">Wie sicher ist gefühlte Sicherheit?</h1>

<p>Ich behaupte über PC, IT und Sicherheit mehr zu verstehen als der durschnittliche Anwender. Ich gehe sogar so weit und behaupte ich habe einen guten Überblick darüber wo ich bewusst durch Geld oder Faulheit in meinen Systemen Sicherheitslücken habe.</p>

<p>Ich habe einen Flipper Zero. Das Hackertool, mit dem man angeblich Autos stehlen kann und durch jede Tür. Dazu gibt es zwei wichtige Fakten zu kennen: 1. Der Flipper ist kein magischer Zauberstab! 2. Das Internet (insbesondere auf Kurzvideo-Plattformen) lügt!<br />
Der Flipper besitzt eine GPIO Leiste. Zwei nRF24 Module gibt es auf Amazon für unter 10 Euro und Jumper-Kabel standen seit längerem auf meiner Einkaufsliste …</p>

<h2 id="aufbau">Aufbau</h2>

<ol>
  <li>7 Jumper-Kabel vom Baum trennen</li>
  <li>nRF24 Modul nach Anleitung auf die GPIO Leiste des Flipper verbinden</li>
  <li>Im Flipper Menu: ‘Applications - GPIO - [NRF24]Sniffer’</li>
  <li>Auf mittleren Button klicken um den Scan zu starten.</li>
</ol>

<p>Jetzt heisst es warten. Der Flipper signalisiert mit einem weissen LED Leuchten und Vibrieren, wenn er etwas findet. Also man darf abgelenkt sein.<br />
In der Zwischenzeit schreibe ich etwas zu meinen Erfahrungen und der Vorgehensweise.<br />
Ja, damit das funktioniert sollte man eine CFW (Custom Firmware) nutzen. Es gibt für die Apps Ports, damit die Apps auch für die OFW (Original Firmware) kompiliert werden können, diese stürzen aber durch fehlende Schnittstellen oft ab.</p>

<h2 id="die-programme">Die Programme</h2>

<p>Da das Bastille Research Team alle Programme offen zur Verfügung gestellt hat, musste nur jemand Python zo Flipper übersetzen. Das ging schnell.<br />
Die Programme für den Flipper sind OpenSource und seit 07.2023 über den Appstore flipc.org zu finden.</p>

<h3 id="nrf24sniffer">[NRF24]Sniffer</h3>

<p>Was sehe ich auf dem kleinen Bernsteinfarbenden Bildschirm?</p>
<ul>
  <li><strong>Transfer rate</strong>: 2Mbps* - 1Mbps (Toggle mit ‘hoch’, wenn Scan aus)</li>
  <li><strong>Sample Time</strong>: 500ms 1000ms 1500ms 2000ms 2500ms 3000ms 3500ms 4000ms* 4500ms … (toggle in 500ms mit ‘rechts’/’links’)</li>
  <li><strong>Channel</strong>: 0 … Zählt hoch bis 120, dann von vorne <strong>Sniffing</strong>: No*/Yes (Toggle mit mittlerem Button)</li>
  <li><strong>Found</strong>: 0* Gefundene Paket <strong>Unique</strong>: 0* Bei Dopplungen die einzigartigen Adressen</li>
  <li>
    <p><strong>Address,rate</strong> Die aktuell gescannten Werte</p>
  </li>
  <li>= Defaultwert</li>
</ul>

<p>Die <strong>Transfer rate</strong> von 2Mbps kann aktiviert bleiben, nur bei alten Geräten, viel Störsignale oder langer Entfernung würde ich auf 1Mbps stellen.<br />
Die <strong>Sample Time</strong> bestimmt wie lange gescant wird, bevor automatisch ein Kanal weiter gesprungen wird. Mit 1000ms habe ich bisher Erfolge erzielt, wobei ich meistens mehr als einen Durchlauf habe. Vielleicht sind 2000ms besser.</p>

<p>Der Sniffer legt die gefundenen Adressen unter <code class="language-plaintext highlighter-rouge">apps_data/nrf24_sniffer/addresses.txt</code> auf der SD karte ab, im Format <code class="language-plaintext highlighter-rouge">0A109A4AE8,2</code>. Vor dem Komma die Adresse an die gesendet wird, das hinter die Transfer rate.</p>

<p>Aus dieser Datei liesst die App ‘Applications - GPIO - [NRF24]Mouse Jacker`.</p>

<h3 id="nrf24mouse-jacker">[NRF24]Mouse Jacker</h3>

<p>Dieses ist das Tool, mit dem man cool auf TikTok aussieht. Mit den zuvor gesammelten Adressen, wenn der Dongle ungepatched ist, kann ich remote Tastaturbefehle injecten. Also ein Wireless BadUSB ausführen.<br />
Wenn mehr als eine Adresse gefunden wurde, können diese durchgescrollt werden, vor Ausführung des BadUSB Scripts. Man sollte bei mehreren gefundenen Adaptern sicher sein, das Script auf dem richtigen Rechner auszuführen. An dieser Stelle einne lieben Gruss an meine Nachbarn, ich hoffe Eurer Dongle ist gepatched.<br />
Die FlipperZero-BadUSB fähigen Ducky-Scripte sollten natürlich schon auf dem Flipper liegen. Warum ich das so deutlich schriebe benötigt einen eigenen Artikel. Gesucht wird im BadUSB Ordner der SD Karte.</p>

<p>Auf meinen eigenen Systemen habe ich das Script <a href="https://github.com/UberGuidoZ/Flipper/blob/main/BadUSB/Char_Test_ALTSTRING.txt">Char_Test_ALTSTRING</a> ausgeführt und mir ist aufgefallen dass einige Zeichen mehrfach gesendet werden. Als ob eine Taste ca. 5 Sekunden nicht losgelassen wird.<br />
Das sieht bei einem ausgegebenen String auf dem Bildschirm komisch aus, und verhindert in einem Payload unter Umständen die Ausführung.</p>

<p>Tipp: Die Adresse muss nicht jedes mal neu gefunden werden. Wenn sie einmal bekannt ist, kann diese beliebig oft auf dem Empfänger wiederverwendet werden. Vermutlich bis die Maus neu gepaired wird.</p>

<h3 id="nrf24scanner">[NRF24]Scanner</h3>

<p>Diese App gibt deutlich mehr Infos dazu aus, was so empfangen wird. Ich bin oft irritiert und bin der Meinung die Namen vom Sniffer und dem Scanner sollten getauscht sein. Aber ich bin nicht der Entwickler.</p>

<h2 id="die-hardware">Die Hardware</h2>

<p>Es gibt die kleineren nFR24 Module mit aufgedrucker Antenne auf dem Board und die längeren mit angeschraubter Antenne.<br />
Die kleineren Boards sollen laut Internet eine Reichweite von etwa 30 m haben und eine maximale Stromaufnahme von etwa 72mA/3,3V. -&gt; nRF24L01+<br />
Die grossen Boards dagegen haben laut Datenblatt 1100m Reichweite, welche mit max. 400 m bisher gemessen wurde und eine maximale Stromaufnahme von 154mA/3,3V. Also deutlich mehr Belastung auf dem Akku des Flipper. -&gt; nRF24L01+PA+LNA<br />
Es gibt Module, die extra für den Flipper Zero gebaut werden, z.B. das <a href="https://rabbit-labs.com/">TehRabbit Modul</a>. Diese Starten bei entsprechender Qualität bei 40-50 USD. Je nach Funktionsumfang, zum Beispiel als externes CC1101 Modul, mit ESP32, … können sie auch mehr oder weniger über 100 USD gehen.</p>

<p>Ich habe mich für die Variante mit externer Antenne entschieden, denn die geschraubte Antenne lässt bei Bedarf auch mehr Leistung/Reichweite durch eine Richtantenne zu.</p>

<p>Bei den Jumperkabeln kann man nicht viel falsch machen. 20 cm sind gerade noch okay, 5 cm halte ich für ideal. Besser ist natürlich ein Board um die Verbindung bereitzustellen.<br />
Diese Boards habe ich auch mit 5V und einem Spannungswandler gesehen. Das hat optisch den Vorteil das ich nur eine Seite der 2-geteilten GPIO Leiste belege, aber Spannungswandeln ist immer Verlustbehaftet.</p>

<h1 id="erfolge">Erfolge</h1>

<p>Ich habe verschiedene Unify Reciver getestet, jeder C-U0007 war angreifbar. Dokumentiert habe ich nicht alle Tests, aber:</p>

<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Version</th>
      <th>Firmware</th>
      <th>USB ID</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2x Unifying Receiver</td>
      <td>C-U0007</td>
      <td>12.03.B0025</td>
      <td>046d:C52B</td>
    </tr>
  </tbody>
</table>

<p>Tipp: Die Firmware des Unifying Reciever kann unter Linux mit <code class="language-plaintext highlighter-rouge">solaar show</code> anzeigt werden.</p>

<p>Der C-U0008 Dongle hat einen TI Chip und kann für das MouseJacking nicht verwendet werden, obwohl er auch auf 2,4 GHz überträgt. Die Schwachstelle lässt sich auf verschiedene Wireless HID Geräte von Logitech, Dell, Lenovo und andere anwenden. Siehe Projektseite.</p>

<p>Aufgrund von Tests mit BadUSB Exfiltration per SPI habe ich meinen Windows Gaming PC reaktiviert. Dieser war mein erstes Ziel in diesem Experiment. Hätte ich mit Linux begonnen, hätte ich mich vermutlich über die Ausgabe von 10 Euro geärgert. Siehe Abschnitt ‘Beobachtungen’.</p>

<h1 id="beobachtungen">Beobachtungen</h1>

<ul>
  <li>Obwohl die Logitech Unifying Software sagt meine Geräte sind Aktuell, sind die Dongles angreifbar.
Es gibt keinen einen Hinweis auf die Sicherheitslücke. Ich muss bewusst das DFU Tool herunterladen, die <a href="https://github.com/Logitech/fw_updates">passende Firmware finden</a> und anwenden. Fast gar nicht kompliziert.</li>
  <li>Die gleichen Unifying Receiver weden an Windows innerhalb von 5 Minuen erkannt. Unter Linux auch nach Stunden des Scannens nicht.
Offensichtlich schützen ein paar freiwillige Nerds im Keller das System besser als zwei Multimillionen-Unternehmen zusammen.</li>
  <li>Ich habe nicht herausgefunden warum ich den Stick nach Bastille Research erst flashen sollte. Bei mir sind sie ohne Aufwand direkt angreifbar.</li>
  <li>Es handelt sich um eine Injection! Ich kann nicht ohne weiteres Tastatureingaben auslesen. Das bitte bei der Gefahrenbewertung beachten. Das pure Sniffen wäre passiv, das Ausführen von Tastatureingaben ist sichtbar. Ich kann mit dieser Attacke auch nicht an dem Login Screen eines Systems vorbei agieren. Sperrt Eure Bildschirme!</li>
</ul>

<p>Die gute Nachricht ist, dass es den neuen <a href="https://www.logitech.com/de-de/products/mice/logi-bolt-usb-receiver.html">Bolt Adapter von Logitech</a> nicht betrifft, da alle Bluetoothverbindungen nur per bekannten Bluetooth-Lücken angreifbar sind.</p>

<h1 id="weitere-links">Weitere Links</h1>

<ul>
  <li>Bastille docs - https://github.com/BastilleResearch/mousejack/tree/master/doc</li>
  <li>Flipper Forum Discussion - https://forum.flipperzero.one/t/how-does-flipper-zero-connect-to-a-dongle/17463</li>
</ul>]]></content><author><name>Benjamin Moeller</name></author><category term="experimente" /><category term="flipperzero" /><summary type="html"><![CDATA[Ich versuche nach Möglichkeit meine Hardware Up-to-date zu halten. Ich finde es doof, wenn ein Firmwareupdater nur für Windows verfügbar ist. Wenn ich Zugriff auf ein Windows habe, dann installiere ich in der Regel die Logitech Unifying Software und schaue nach ob alle Geräte aktuell sind. Das geht dank USB in der Regel schnell. Vor einiger Zeit gab es in den News zuerst die Info, dass die Logitech Presenter anfällig sind, später wurde herausgefunden dass der verwendete Chip nRF24LU1+ von Nordic Semiconductor auch in vielen Unifying Dongles zu finden ist. Logitech hat schnell ein Firmwareupdate zugesagt und geliefert. Durch den ersten Absatz dachte ich das ist genug. Wenn dem so wäre, hätte ich diesen Text nicht verfasst.]]></summary></entry><entry><title type="html">Infrastruktur - WireGuard</title><link href="http://blog.lupuse.org/infrastruktur/2022/06/12/infrastruktur-wireguard.html" rel="alternate" type="text/html" title="Infrastruktur - WireGuard" /><published>2022-06-12T21:14:03+00:00</published><updated>2022-06-12T21:14:03+00:00</updated><id>http://blog.lupuse.org/infrastruktur/2022/06/12/infrastruktur---wireguard</id><content type="html" xml:base="http://blog.lupuse.org/infrastruktur/2022/06/12/infrastruktur-wireguard.html"><![CDATA[<h1 id="motivation">Motivation</h1>

<p>Für mein Wohnmobilprojekt habe ich mir einen GL.iNet Beryl Reiserouter gekauft. Diese kleinen Dinger aus Hong Kong basieren auf OpenWRT und bieten für schmales Geld (35-80 Euro) eine gute Basis um unterwegs mehrere Geräte mit geringem Aufwand zu betreiben.<br />
Die Grundidee ist, dass ich nicht jedes meiner Geräte im (Hotel)WLAN anmeldne muss, sondern den Router vorschalte und dieser einen sicherne Zugang für alle meine Geräte stellt. Sicher, weil die kleinen Router standardmäßig eine Unterstützung für gängige Protokolle, wie OpenVPN und WireGuard mitbringen. Wer keine Möglickeit hat einen Endpunkt zu mieten oder selbst aufzubauen, dem steht immernoch per Klick das TOR Netzwerk offen.<br />
Mit OpenVPN bin ich nie warm geworden, daher versuche ich mich am aktuelleren WireGuard.</p>

<h1 id="wireguard-skript---erste-schritte">WireGuard Skript - Erste Schritte</h1>

<p>Wireguard bietet für Linux ein ‘All in One’ Skript an. Dieses ist genauso gruselig, wie es klingt. Es wird aus dem internet heruntergeladen und ausgeführt …</p>

<blockquote>
  <p>wget https://git.io/wireguard -O wireguard-install.sh &amp;&amp; sudo bash wireguard-install.sh</p>
</blockquote>

<p>Als erste Testumgebung habe ich damit angefangen. Und es funktioniert.</p>

<p>Dann wollte ich den Service auf meine Umgebung anpassen. Also Konfiguration unter <code class="language-plaintext highlighter-rouge">/etc/wireguard/</code> anpassen und den Dienst neu starten … den Dienst … den Dienst … Wo ist der denn? … Server durchstarten geht auch.<br />
Schon vorher wollte ich dringend das Skript gegen eine saubere Installation ersetzen. Spätestens an dem Punkt war mir die Dringlichkeit bewusst.</p>

<h2 id="wireguard-aufsetzen">Wireguard aufsetzen</h2>

<p>Im Proxmox schnell einen Container erstellt. Debian 11.0.3 Image, 12GB Festplatte auf der lokalen SSD, 1Core, 512MB RAM und im Netzwerk ‘vmbr1 - Green’. Container starten.</p>

<p>Ab Debian 11 ist das Paket <a href="https://packages.debian.org/bullseye/wireguard">wireguard</a> mitgeliefert, davor benötigt es <a href="https://packages.debian.org/buster-backports/wireguard">Backports</a>.</p>

<hr />

<h1 id="abbruch">Abbruch</h1>

<h2 id="a-long-story-short">A long story short</h2>
<p>Auf dem Proxmox (oder anderen virtuellen Umgebungen) hat man keinen direkten Zugriff auf /dev/tun. Das lässt sich mit ein paar Hebeln gerade biegen und der Helper Boringtun von Cloudflare unterstützt das ganze…<br />
Aber da ich so viel parallel lernen musste, bleibe ich zunächst bei dem oben genannten Script.</p>

<hr />

<h1 id="wireguard-server-skript">Wireguard Server (Skript)</h1>

<h2 id="etcwireguardwg0conf">/etc/wireguard/wg0.conf</h2>

<p>Die zentrale Konfigurationsdatei für dne ersten Tunnel (wg0) wird angelegt.<br />
In dieser Datei befindne sich folgende Zeilen:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Interface]
Address = 10.7.0.1/24, fddd:2c4:2c4:2c4::1/64
PrivateKey = UGxxxxxxxxxxxxxxxWw=
ListenPort = 51820
</code></pre></div></div>

<p>Unter [Interface] wird definiert, wie wg0 antworten soll.</p>
<ul>
  <li><strong>Address</strong> gibt an welche IP wg0 bekommt und in wlechem Netz es existiert</li>
  <li><strong>PrivateKey</strong> sollte nie an die Öffentlichkeit gelangen, dieses ist das Geheimnis, welches Euer VPN schützt. Der Name lässt shcon vermuten: Diese Information ist privat.</li>
  <li><strong>ListenPort</strong> ist der Port, an den die Firewall weiterleiten muss (Portforwarding) und/oder der in der Firewall geöffnet werden muss. Zum Glück nur für UTP.</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># BEGIN_PEER amy
[Peer]
PublicKey = hI8xxxxxxxxxxxxxxxxxxe3M=
PresharedKey = Ew7xxxxxxxxxxxxxxxxxxsg=
AllowedIPs = 10.7.0.2/32, fddd:2c4:2c4:2c4::2/128
# END_PEER amy
</code></pre></div></div>

<p>Die Kommentare am Anfang und am Ende sind für Wireguard unwichtig, werden aber vom Script gelesen um Peers (Teilnehmer) in der Konfigurationsdatei zu erkennen, bearbeiten und bei Bedarf zu löschen.</p>
<ul>
  <li><strong>PublicKey</strong> ist der öffentliche Schlüssel. Dieser ist nicht allzu wichtig, wenn der verloren geht. Im Verlustfall reicht es aus den Peer zu entfernen und, wenn gewünscht, neu anzulegen.</li>
  <li><strong>Presharedkey</strong> Dieser ist zu sehen wie WLAN Key. Der sollte geheim bleiben.</li>
  <li><strong>AllowedIPs</strong> definiert die IP des Endpunkts und das Netz.</li>
</ul>

<h2 id="routing">Routing</h2>

<p>Das Routing wird nicht von Wireuard übernommen! Wireguard stellt das Netzwerkgerät wg0 und ein anderes Programm sorgt für das routing. Klassisch wurden bisher unter Linux bisher die iptables dafür eingesetzt, diese werden nun durch die nftables ersetzt.</p>

<p>Das Programm <code class="language-plaintext highlighter-rouge">iptables-save</code> sagt:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*filter
:INPUT ACCEPT [0:0]
:FORWARD ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
-A INPUT -p udp -m udp --dport 51820 -j ACCEPT
-A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT
-A FORWARD -s 10.7.0.0/24 -j ACCEPT
COMMIT
*nat
:PREROUTING ACCEPT [0:0]
:INPUT ACCEPT [0:0]
:OUTPUT ACCEPT [0:0]
:POSTROUTING ACCEPT [0:0]
-A POSTROUTING -s 10.7.0.0/24 ! -d 10.7.0.0/24 -j SNAT --to-source 192.168.21.51
COMMIT
</code></pre></div></div>

<p>Interessant ist die vorletzte Zeile: Alles was 10.7.0.0/24 (der Tunnel) ist und nicht an 10.7.0.0/24 geht, wird an 192.168.21.51 weitergeleitet.<br />
Aber was macht 192.168.21.51 damit?</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@walter01:~# ip r
default via 192.168.21.1 dev eth0 onlink 
10.7.0.0/24 dev wg0 proto kernel scope <span class="nb">link </span>src 10.7.0.1 
192.168.21.0/24 dev eth0 proto kernel scope <span class="nb">link </span>src 192.168.21.51
</code></pre></div></div>

<p>Es hat keine spezielle Route, aso wird es an die Defaultroute übergeben und an 192.168.21.1 gegeben … welches zufällig mein Router in das Internet ist.</p>

<h3 id="zusammenfassung">Zusammenfassung</h3>

<p>Wireguard erstellt einen Tunnel mit dem Subnet 10.7.0.0/24. Alle Geräte im Tunnel (Peers) bekommen eine feste IP.
Die iptables nehmen auf dem Wireguard Server den Netzwerkverkehr und geben diesen an das Netzwerkgerät im LAN.
Durch das NAT weiss der Router ins Internet nicht, dass der Verkehr aus dme Tunnel kommt. Für das LAN sieht es aus als würdne alle Anfragen vom Wireguard Server lokal kommen.</p>

<h2 id="wireguard-client-config">Wireguard Client Config</h2>

<p>Die Client config wird per dem oben genanntne Script einfach erstellt. Es wird eine Datei mit dem namen und der Endung .conf erstellt.</p>
<h3 id="amyconf">amy.conf</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[Interface]
Address = 10.7.0.2/24, fddd:2c4:2c4:2c4::2/64
DNS = 192.168.21.53
PrivateKey = 4P8xxxxxxxxxxxxxxx1I=

[Peer]
PublicKey = UlExxxxxxxxxxxxxxx3o=
PresharedKey = Ew7xxxxxxxxxxxxxxxsg=
AllowedIPs = 0.0.0.0/0, ::/0
Endpoint = vpn.domain.org:51820
PersistentKeepalive = 25
</code></pre></div></div>

<p>Hier sehen wir die folgenden Einstellungen:</p>

<p>Abschnitt [Interfaces]</p>
<ul>
  <li><strong>address</strong> Die Client Adresse im VPN. Es funktioniert hier kein DHCP!</li>
  <li><strong>DNS</strong> Der DNS Server muss entweder im LAN stehen und erreichbar sein, ode rman nimmt einen externen. Ein Externer DNS Server ist auch ein Sicherheitsrisiko, da dieser jede Hostnamenauflösung mitschneidet.</li>
  <li><strong>PrivateKey</strong> Wieder besonders schützenswert. Wer diesen Key hat, kann sich mit geringem Aufwand als der Client ausgeben.</li>
</ul>

<p>Abschnitt [Peer]</p>
<ul>
  <li><strong>PublicKey</strong> Dieser darf wieder bekannt werden. Dieser dient ‘nur’ zur cryptografischen Austhentifizierung.</li>
  <li><strong>PresharedKey</strong> Ist der Schlüssel, den alle Clients und der Server kennen muss. Aber wie beim WLAN Key (PSK) sollte es keiner kennen, der nicht in das VPN soll.</li>
  <li><strong>AllowedIPs</strong> Hier wird es interessant. Diese Option definiert welcher Verkehr über den Tunnel gehen soll.</li>
  <li><strong>Endpoint</strong> Hier wird dem Client gesagt, über wleche Adresse der Server erreicht wird. Soll der Tunnel über Internet aufgebaut werden, muss der VPN Server auch über diesen Hostnamen und dem Port aus dme Internet erreichbar sein.</li>
  <li><strong>PersistentKeepalive</strong> Wenn diese Uption nicht gesetzt ist, kann es sein dass die Verbindung bei nicht-Nutzen getrennt wird. Also wird alle 25 Sekunden ein Signal über die Leitung geschickt.</li>
</ul>

<h2 id="allowed-ips">Allowed IPs</h2>

<blockquote>
  <p>AllowedIPs = 0.0.0.0/0, ::/0</p>
</blockquote>

<p>Wenn der VPN tunnel aufgebaut wird und 0.0.0.0/0 ‘Allowed’ ist, dann wird der gesamte Netzwerkverkehr über dne Tunnel gesendet.</p>

<p>In Unternehmen soll oft nur der Netzwerkverkehr der Firma über dne Tunnel gesendet werden. Dann wird einfach das entsprechende Subnetz eingetragen, zum Beispiel: 192.168.21.0/24. Der Wireguard Server muss das Subnetz natürlich kennen und bedienen können.
Es gibt auch die Wariante mit 0.0.0.0/1. Damit wird die Default-Route im System nicht überschireben und im Falle eines Ausfal im/des VPN kann der Client weiterhin im Internet agieren.</p>]]></content><author><name>Benjamin Moeller</name></author><category term="infrastruktur" /><category term="wireguard" /><summary type="html"><![CDATA[Motivation]]></summary></entry><entry><title type="html">Flipper Zero</title><link href="http://blog.lupuse.org/experimente/2022/06/12/flipper_zero.html" rel="alternate" type="text/html" title="Flipper Zero" /><published>2022-06-12T21:14:03+00:00</published><updated>2022-06-12T21:14:03+00:00</updated><id>http://blog.lupuse.org/experimente/2022/06/12/flipper_zero</id><content type="html" xml:base="http://blog.lupuse.org/experimente/2022/06/12/flipper_zero.html"><![CDATA[<p>Um Mitte 2020 herum haben ein paar Entwickler gedacht man könnte ein paar Antennen und einen kleinen Prozessor mit einem kompakten Display in ein Tamagotchi-Gehäuse stecken und so verschiedenste ‘Pentest Tools’ handlicher machen.<br />
Da das Entwicklung, und somit Geld uns Zeit kostet, haben sie die Idee auf <a href="https://www.kickstarter.com/projects/flipper-devices/flipper-zero-tamagochi-for-hackers">Kickstarter</a> im August 2020 angeboten. Das bedeutet sie schrieben was sie vorhaben, aber anstelle einem Banker einen Finanzierungsplan vorzulegen sucht man verrückte (interessanter Weise ‘Backer’ genannt) mit zu viel Geld aus dem Internet. Mein Bruder ist so einer, aufgrund der Idee hat er 232$ in den Topf geworfen, ohne zu wissen ob das Produkt jemals kommen wird. So wie viele Andere auch und anstelle der mindestens 60.000 USD kamen knapp unter 5 Mio zusammen.</p>

<p>Dem letzten Fakt ist es wohl auch zu verdanken, dass das Projekt diverse Krisen überwunden hat. Corona/Lockdown, Chipmangel und querliegende Containerschiffe (Evergreen im Suez Kanal), eine heftige Unterhaltung über Ländergrenzen (Russland/Ukraine) …  Die Entwicklung und Produktion findet zu in HongKong (Shzenen) statt. Der Gründer und viele aus dem Team kommen aus Russland, was für viele Spekulationen gesorgt hat.<br />
An dieser Stelle möchte ich erwähnen, dass nach dem sogenannten ‘<a href="https://www.ccc.de/hackerethics">Hacker Manifest</a>’ der Glaube, das Geschlecht, Alter, Herkunft, Hautfarbe, Rasse und so weiter keine Rolle spielen. Da wir uns hier auf einem sehr technischen Gebiet befinden und vermutlich viele der beteiligten zur Gruppe ‘Hacker’ gezählt werden können, denke ich dass die politische Situation in einer parallelwelt stattfindet. Also nicht für das Projekt relevant ist. Das Hackermanifest wird z.B. erwähnt im Film ‘<a href="https://www.imdb.com/title/tt0113243/">Hackers</a>’ von 1995.</p>

<p>Von vorneherein war klar, dass das Projekt Open Source wird. Dabei hat das Unternehmen ‘Flipper Devices Inc.’ die Quellen auf GitHub zeitweise auf ‘privat’ gestellt, weil sie durch zu viel Unterstützung nicht mehr mit den Kernaufgaben voran kamen. Auch das hat für Spekulationen geführt, man behauptete zum Beispiel dass das Team sich mit dem Geld abgesetzt hätte.<br />
Die Flipper Devices Inc. war zu jeder Zeit so nett und hat Updates gegeben und über Entwicklungsmeilensteine informiert. Nicht oft, aber fast immer mit interessanten Einblicken in die Entwicklung und Produktion. Das ist für so eine Kampagne in dieser Situation nicht selbstverständlich. Es gab viele Kritiker, Zweifler und negative Stimmen. Aber:<br />
Am Ende gab es den <a href="https://flipperzero.one/">Flipper Zero</a>.</p>

<p>Da mein Bruder nun Mitte 2022 2 Flipper hatte und wir und zwischenzeitlich viel darüber unterhalten haben, hat er mir einen Geschenkt. Deshalb? Ich weis es nicht, auf jeden Fall: Vielen Dank!</p>

<h1 id="was-ist-der-flipper-zero">Was ist der Flipper Zero?</h1>

<p>Wie gesagt erinnert das Äussere sehr an einen Tamagotchi. Man sieht nur ein 1,4” Display, welches mit 64x128 Pixeln monochrome auflöst. Rechts daneben ein 4-Wege ‘Joypad’ mit Bestätigungsbutton und einen ‘Zurück’ Button.<br />
Oben hat man 18 Löcher für ‘Jumper Kabel’. Rechts befindet sich ein IR-Fenster, wie bei Fernbedienungen. Links eine USB-C Schnittstelle zum Laden und für die Kommunikation mit einem PC oder Telefon. Unten gibt es einen SD Karten Slot. Auf der Rückseite gibt es drei iButton Kontakte.</p>

<p>Schauen wir einmal genauer rundherum:</p>

<h2 id="das-display">Das Display</h2>

<p>Das Display ist bernstein Hintergrundbeleuchtet und auch bei direkter Sonneneinstrahlung sehr gut zu lesen. Wenn der Flipper gerade nicht benutzt wird gibt es niedliche Animationen von … einem Delfin.<br />
Unterstützt wird die Anzeige für verschiedene Stati von einer LED unten rechts neben dem Display.</p>

<h2 id="das-ir-fenster">Das IR Fenster</h2>

<p>Es gibt schon lange das Projekt ‘<a href="https://de.wikipedia.org/wiki/TV-B-Gone">TV-B-Gone</a>’. Eine kleine Platine, die auf Knopfdruck alle bekannten ‘Power’ codes per IR (Infrarot) sendet. Damit sollen sich z.B. im Pub die TV ausschalten lassen.<br />
Dieses Gerät ist ein schönes Spielzeug, aber nicht einfach erweiterbar, und mit kaum Lerneffekt. Zudem ist der Prozessor sehr klein, so dass nur einfachste Befehle funktionieren.<br />
Im <a href="https://blog.flipperzero.one/infrared/">Blog</a> des Flipper lernen wir sehr komprimiert, wie ein IR Signal aufgebaut ist, welchen Sender und Empfänger der Flipper vernwendet. Und vor allem, dass eine TV Fernbedienung deutlich einfacher ist als das Signal eines AC (Air Conditioner/Klimaanlage).<br />
Kurzgesagt:<br />
Eine TV Fernbedienung sendet ein IR Signal, welches generell aus zwei Teilen besteht. Zuerst das Protokoll, dann den Steuerbefehl. Da ein Teil immer gleich ist und keine Verschlüsselung stattfindet, ist es im Verhältnis einfach zu analysieren.<br />
Ein AC dagegen hat auf der Fernbedienung oft ein Display. Da sie aber keine Daten empfängt, sendet sie nicht nur den Befehl ‘1°C wärmer’, sondern immer den gesamten Status der Fernbedienung. Das Datenpaket ist also deutlich breiter oder länger.<br />
Erklärung: Wenn ich ansonsten ausserhalb der Sichtweite von 20° auf 25° stelle und innerhalb der Sichetweite von 25° auf 26°, würde der AC nuf 21° erhöhen obwohl auf der Fernbedienung 26° steht … Das ist der Grund, warum die Fernbedienung immer alle Daten sendet um ‘ohne bidirektionale Kommunikation synchron’ zu bleiben. Ein TV macht einfach ein lauter, sobald sich die Fernbedienung in sichtweite befindet und zeigt es in den meisten Fällen sogar direkt an.</p>

<p>Im Gegensatz zum zuerst genannten Gerät und deren Alternativen kann der Flipper sowohl direkt von einer Fernbedienung lernen als auch durch Datenbanken aus dem Internet aufgefüllt werden. Im Menü muss dabei unterschieden zwischen ‘Universal Remotes’ (Sende alle bekannten Codes für Aktion x nacheinander) und ‘Saved Remotes’ (lese Konfiguration einer Fernbedienung aus der Datenbank).</p>

<p>Was mich persönlich stört ist der Umstand, dass in den Bezeichnungen Das Modell der Fernbedienung und die Modelle der TV oft durcheinander geworfen werden. Nicht nur im Flipper Projekt, bei allen IR Datenbanken.<br />
Für die normalen Tasten ist es relativ einfach, einige Fernbedienungen beherrschen aber auch die Steuerung anderer Geräte. Daher ist es durchaus sinnvoll zu definieren für welches Gerät ich ‘einprogrammiert’ habe. aber das ersetzt nicht die Angabe des Fernbedienungsmodell.</p>

<p>Meine Idee ist, dass der Code abgespeichert wird mit folgenden Informationen:<br />
<code class="language-plaintext highlighter-rouge">[Funktion ] - [Protocol] - [Steuercode] - [Fernbedienung] - [Gerät] - [Typ]</code></p>

<ul>
  <li>Funktion - Power, Volup, Voldn, Chup, Chdn, …</li>
  <li>Protocol - NEC, Samsung, …</li>
  <li>Steuercode - Irgendwas in Hex</li>
  <li>Fernbedienung - Hersteller und Modell</li>
  <li>Gerät - Hersteller und Modell</li>
  <li>Typ - TV, AVR, BD, DVD, AC, …</li>
</ul>

<p>Da die IR Codetabellen in der Regel Textdateien sind, gibt es einige Github Verzeichnisse für verschiedene Projekte, welche mal besser und mal schlechter dedupliziert sind.</p>

<h2 id="die-gpio-buchse">Die GPIO Buchse</h2>

<p>Mittels GPIO kann man mit dem Flipper so ziehmlich alles nachbauen, was man mit dem Arduino schon konnte und ein wenig mehr. Das Thema ist so komplex, dass es mindestens einen, vermutlich aber deutlich mehr eigene Blog Artikel benötigt.<br />
Man kann nicht nur Jumperkabel stecken, sondern auch ganze Platinen. Durch den Pinabstand von 2,75mm sehr universell. Aus der einfachen Steckerleiste werden dann Sender und Empfänger für Bluetooth, WLAN, Zigbee, nRF24, … Diese Boards benötigen aber am besten eine eigene Firmware mit einer API. Der Speicher im Flipper Zero ist begrenzt.</p>

<h2 id="die-usb-schnittstelle">Die USB Schnittstelle</h2>

<p>Das Gerät ist noch ganz jung und Open Source. Das bedeutet es gibt oft und viele Aktualisierungen. Es gibt verschiedene Wege diese zu installieren. Mein favorisierter Weg ist das Aufrufen des Helper ‘qFlipper’, den Flipper erkennen zu lassen und dann einfach auf ‘Install’ klicken.<br />
Es ist auch möglich über USB auf das GPIO Panel zuzugreifen und den Flipper zum Programmer zu machen. Später.</p>

<h3 id="rubber-ducky">Rubber Ducky</h3>

<p>Die USB Schnittstele kann auch als Tastatur funktionieren, die fertige Scripte abspielt. Genannt wird diese Attacke ‘Ruber Ducky’ nach der dafür entwickelten Skriptsprache oder auch BadUSB.</p>

<h2 id="die-sd-karte">Die SD Karte</h2>

<p>Der Flipper hat einen Speicher von etwa einem MB. Die Firmware ist aktuell ca. 800KB gross. Das bedeutet man hat einen theoretischen Nutzspeicher von 200KB. dieser Blog Artikel ist schon größer. Die Lösung ist eine SD Karte.<br />
Wie auch beim Display war bei der SD karte der geringe Stromverbrauch massgebend, daher greift man auf diese per SPI und nicht per SPIO auf die Karte zu. Das ist wichtig, wenn man eine Karte kauft. Denn SPIO können alle, SPI ist nicht zwangsläufig implementiert. Der Flipper kann Karten bis 512 GB lesen, aber das macht irgendwann keinen Spass mher, das Team empfiehlt Karten bis 32 GB Größe zu nutzen.<br />
Auf die Karte kommen auch die Datenbanken. Eigentlich sind ‘die Datenbanken’ nur Textdateien mehr oder minder sinnvoll sortiert in Ordnern. Gerade beim ersten Einrichten sollte man die SD Karte lieber aus dem Flipper nehmen und am favorisierten Desktop bearbeiten.<br />
Es gibt spezielle Datenbanken für IR Codes, es gibt SubGHz Protokolle, NFC Wörterbücher … Dabei ist immer zu beachten: Manchmal ist weniger mehr. Jeder Eintrag kostet Rechenzeit.</p>

<h2 id="der-ibutton">Der iButton</h2>

<p>Der iButton ist in einigen Ländern recht gängig als Zugangssystem. Zumindest in Deutschland ist das nicht der Fall, man trifft diese nur sehr selten. Ich habe noch nie eines in echt gesehen.</p>

<h1 id="ist-das-alles">Ist das alles?</h1>

<p>Von außen macht der Flipper schon einiges her. Es gibt noch mehr im Innenleben. Wenn ich ihn beschrieben soll, dann sage ich ‘Ein Tamagotchi mit vielen Antennen’. Diese sieht man nicht, da sie für drei Bereiche sind: SubGHz, RFID, NFC.</p>

<h2 id="was-ist-subghz">Was ist SubGHz?</h2>

<p>Viele haben ein Auto mit Fernbedienung für die Zentralverrieglung. Einige haben eine weitere Fernbedienung für das Garagentor. Auf beiden steht eine Frequenz, meist irgendwas um die 400 oder 880 MHz. -&gt; Unter 1GHz = SubGHz …<br />
Bluetooth findet im 2,4GHz Band statt und WLAN im 2,4GHZ sowie 5GHz Band. Diese fallen also aus der Zuständigkeit des Flipper heraus. Wobei er ein BLE (Bluetooth Low energy) Modul hat um mit Handys zu sprechen … anderes Kapitel.</p>

<p>Ich kann also den Flipper starten, im Menü ‘Sub-GHz’ raussuchen und mit dem ‘Frequenz Analyzer’ was in meiner Umgebung so ab geht. Dabei zeigt der ‘Frequenz Analyzer’ an, wenn er etwas erkennt was ein Signal sein könnte und gibt dazu die Stärke an. Die Stärke steht als RSSI dort, also nicht die absolute Stärke in dB, sondern viel mehr die ‘Nutzstärke’ über dem Grundrauschen.<br />
Bekannte Signale kann ich dann mit ‘Read’ lesen. Unbekannte Signale kann ich mit ‘Read RAW’ aufnehmen und zur Analyse speichern oder direkt wieder abspielen.</p>

<h3 id="ich-kann-damit-autos-knacken">Ich kann damit Autos knacken?</h3>

<p>Halt stopp. Abgesehen davon, dass das höchst illeal wäre: Nein.<br />
Zunächst einmal hat ein Auto heutzutage einen sogenannten Rolling Code. Das bedeutet wenn die Tür geöffnet wurde, dann wechseln Sender und Empfänger den Code. Wenn ich genug dieser Codes sammeln würde und mich mit Mathematik auskenne, dann könnte ich rein theoretisch den nächsten Code raten. Dazu brauche ich aber mehr als einen zufällig aufgeschnappten RAW Code zum Parkplatz des Supermarkt. Und wenn ich einen Schlüssel bekomme und so oft drauf drücke, wie notwendig wäre, dann ist die Chance sehr hoch, dass sich der Schlüssel und das Fahrzeug desynchronisieren…<br />
Das Flipper Projekt steht dafür ein, dass Rolling Codes nicht implemnetiert werden. Da es eine Open Source Plattform ist kann das theoretisch jeder selbst, aber wenn ich diese Fähigkeiten habe kann uahc auch andere Empfänger/Sender kaufen oder bauen. Wir sind durch den Flipper kein Stück unsicherer als zuvor.</p>

<h2 id="nfc">NFC</h2>

<p>Wie bei SubGHz kann auch auch NFC Karten auslesen, speichern und ‘abspielen’. Dabei gibt es diverse Standards und noch nicht alle werden aktuell unterstützt. Hier arbeitet das Team sehr daran alle möglichen Kartentypen zu erkennen.</p>

<h3 id="aber-bankkarten-kann-ich-damit-hacken">Aber Bankkarten kann ich damit Hacken?</h3>

<p>Halt stopp! Wieder: Nein.<br />
Eine Bankkarte hat zwei Bereiche. Einen lesbaren und einen sicheren. Der lesbare Bereich enthält informationen wie die Kontonummer, BLZ, das Ablaufdatum, … Grob gesagt: maximal das was auf der Karte gedruckt ist. Wenn eine Transaktion stattfindet, dann gibt das Terminal einen Wert an die Karte. Die Karte berechnet eine Antwort und gibt diese an das Terminal zurück… Keiner weis was in der Karte passiert und wie die Berechnung stattfindet (stark vereinfacht). 
Das Terminal kann bei der Bank anfragen ob die beiden Werte richtig sind, ohne je Zugriff auf den sicheren Bereich gehabt zu haben.</p>

<p>Wenn ich etwas Clonen kann, dann vielleicht die Zutritskarte zu meinem Büro. Aber will ich das bei den ganzen Kameras riskieren?</p>

<h2 id="rfid">RFID</h2>

<p>RFID hat einen ähnlichen Zweck wie NFC, nur für einen weiteren Wirkungsbereich. Während NFC oft zur Authentifizierung einer Person eingesetzt wird, werden RFID als Zugangskontrolle oder in der Logistik zum Identifizieren von Lieferungen eingesetzt.<br />
Auch hier hilft das Blog wieder: https://blog.flipperzero.one/rfid/</p>

<h2 id="die-firmware">Die Firmware</h2>

<p>Die Firmware ist das Betriebssystem des Flipper. dieses ist aktuell noch in starker Entwicklung. 
Dabei scheint eines der Hauptaufgaben der Entwickler zu sein, auszusortieren was illegal ist und schauen was verwendbar ist. Dabei gibt es keine Grauzone, denn wenn etwas fragwuerdig ist, gibt es genug Anfragen, die sicher umgesetzt werden können.</p>

<p>Wie bereits geschrieben ist die Firmware auf einem sehr kleinen Speicher untergebracht, das limitiert auch die Möglichkieten. Eine der wichtigsten Entwicklungen ist altuell der ELF Loader, mit dem Plugins von der SD Karte geladen werden können. Das erhöht den Lese-/Schreibzugriff auf der Karte und damit die IO Last auch auf der CPU. Aber ich denke dennoch dieses wird ein Durchbruch, wnen man eigene Projekte nicht immer komplett kompilieren muss.</p>

<p>Die Firmware liegt auf GitHub und kann einfach kompiliert werden. Es gibt seit dieser Woche eine .vscode Unterstützung, aber unter Linux ist es deutlich einfacher.</p>

<p>Beispiel Kali Linux 2022.2:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">apt install git openocd clang-format-13 dfu-util protobuf-compiler gcc-arm-none-eabi</code></li>
  <li><code class="language-plaintext highlighter-rouge">git clone --recursive https://github.com/flipperdevices/flipperzero-firmware.git</code></li>
  <li><code class="language-plaintext highlighter-rouge">cd flipperzero-firmware</code></li>
  <li><code class="language-plaintext highlighter-rouge">./fbt</code></li>
  <li>Bei Fehlern lassen die sch relativ unkompliziert lösen.</li>
  <li>unter <code class="language-plaintext highlighter-rouge">/dist/</code> liegt die Datei <code class="language-plaintext highlighter-rouge">flipper-z-{target}-full-{suffix}.dfu</code></li>
  <li>die .dfu mit <code class="language-plaintext highlighter-rouge">./qFlipper</code> installieren (Button [install from file])</li>
</ul>

<h2 id="die-dokumentation">Die Dokumentation</h2>

<p>Hat Lücken. Das bringt es auf den Punkt.<br />
Bis zur Firmware 1.0 wollen sie das aber beheben. Aktuell gibt es so viele Änderungen in den APIs, dass eine offizille Dokumentation nicht nachzupflegen wäre.</p>

<p>Der Tipp, wie man eigene Progrramme schreibt: Es ist OpenSource. Schau Dir an was schon existiert.</p>

<h1 id="ist-das-nicht-illegal">Ist das nicht illegal?</h1>

<p>Der Flipper Zero selbst vereint nur diverse Scanner. Die Wellen fliegen um uns herum durch den Äther und können aufgenommen werden. Sobald ich versuche diese Aufnahme zu analysieren ist es das gleiche, als wenn ich mit einem Dietrich an Deiner Tür stehe und versuche sie zu knacken. Das ist Straffbar, egal wie erfolgreich ich bin.<br />
Die originale Firmware legt größten Wert darauf ‘sauber’ zu sein, also weder das Auslesen von Bankkarten zu ermöglichen, noch vorberechnete Rolling Codes bereitzustellen oder überhaupt vom Gerät einen Rolling Code errechen zu lassen.</p>

<p>Leider sieht man im Forum oft ‘Ich bin Noob, wie kann ich auf xyz zugreifen?’. Die haben sich vorgestellt auf dem Supermarktparkplatz kurz einen Tastendruck mitzuschneiden und dann jedes beliebige Auto zu öffnen.<br />
Das Resultiert darin, dass es vielen zu aufwändig ist und es gibt mittlerweile Marktplätze für gebrauchte Flipper.</p>

<p>Also nein, der Flipper ist nicht Illegal. Er ist auch nicht entwickelt worden für illegale Aktivitäten. Sicher kann man im Rahmen eines angemeldeten/erlaubten Pentesting verschiedene Vektoren ausprobieren, die vorher nicht so einfach/handlich möglich waren. Auch dabei muss man sich aber zunächst mit der Materie befassen und die Grundlagen lernen. Es reicht nicht den Flipper hinzuhalten und auf magischer Weise ist jedes Tor offen. Und wie zuvor erwähnt, wer das kann, der konnte es auch vorher mit relativ geringen Hürden.</p>

<h2 id="und-wenn-ich-nichts-kaputt-mache">Und wenn ich nichts kaputt mache?</h2>

<p>Stellen wir uns einen gut besuchten Pub vor, es ist gerade Bundesliga. Natürlich rundherum viele begeisterte, die auch lautstark ‘ihrem’ Verein zujubeln, so dass man es im Stadion hört. Ich will eigentlich nur gemütlich mein Guinness geniessen und vielleicht über ein Projekt mit einem gleichgesinnten sprechen. Was liegt näher als den Flipper rauszuholen und per ‘Universal Remote’ den TV abzuschalten?<br />
Auch wenn ich dadurch sicher nicht in das Gefängniss komme, so ist es nicht ratsam wenn der Barkeeper oder ein Fan herausfindet, dass du die 2. Fernbedienung in der Hand hälst. Vielleicht wünscht man sich dann sogar die Polizei herbei.</p>

<p>Laufe ich herum und öffne Garagentore, dann ist das sicher eine Zeit lang interessant. Möchte ich das Picklocking an meiner Haustür ‘probiert’ wird?<br />
Tesla hat einen recht einfachen Befehl um die ‘Tank’klappe zu öffnen. Das macht Sinn für automatische Ladestationen, später. Auch hier würde ich den Besitzer vor dem ausprobieren zu fragen. Ich kann mir sogar vorstellen dass die Besitzer sogar interessiert sind was möglich ist. Das Öffnen ohne Erlaubnis wäre, wie an Autos vorbeizugehen und die Tankklappen zu öffnen … also nicht legal.</p>

<h1 id="und-was-kann-ich-praktisch-damit-anfangen">Und was kann ich praktisch damit anfangen?</h1>

<p>Tja, das ist die große Frage. Bis Mitte 2022 hat jeder in der Gesellschaft auch ohne Flipper überlebt. Also ich wage zu behaupten keiner hätte länger gelebt, hätte er einen besessen.<br />
Hier kommen zwei Weltern zusammen.</p>
<ol>
  <li>Der Arduino. Ein kleiner Microcontroller, mit dem man spielerisch Projekte umsetzen kann. Auch der RaspberryPi geht in diese Richtung der ‘Gamification’ oder auch ‘Rapid Development’. Man kann sich die Umgebung ansehen, man kann Token/Karten/Schlüssel emulieren. Halt nur im erlaubten Bereich. Begreifen durch anfassen.</li>
  <li>Im BackTrack Linux (heute <a href="https://www.kali.org/">Kali Linux</a>) heisst es “Je leiser du wirst, desto mehr kannst du hören.”. Ich muss nicht alles hacken, knacken, penetrieren. Es reicht manchmal auch einfach zuzuhören. Und vielleicht dadurch ableiten zu können wie etwas einfacher oder besser geht. Wenn ich zuhöre weis ich ja noch gar nicht was gesagt wird und die Fragen oder Ideen kommen erst dann.</li>
</ol>

<p>Die Fragen im Forum zeigen aber auch, dass diese Art der Forschung notwendig ist. Es gibt Menschen, die nicht glauben, dass von der Sonne Infrarotstrahlung kommt. Für mich persönlich war das Kapitel AM (Amplituden Modulation) und FM (Frequenz Modulation) bisher am aufschlussreichesten. Auf die Anwendungen in der Welt der GPIO bin ich sehr gespannt.</p>

<p>Wichtig ist auch zu wissen, dass der Flipper in der Regel keine ‘Wellen’ speichert. Alle aufgenommenen Signale werden von den Chips bereits zu 1 und 0 verarbeitet und weitergegeben. Wir haben also eher eine sehr niedrig auflösende MP3, als eine 1:1 Kopie in WAV. Daher ist es wichtig, dass der Flipper in seinen Datenbanken möglichst viele Codierungen zu kennen, denn die lassen sich besser als 0 und 1 verarbeiten als irendwelche Spitzen eines vermutlichen Signals.</p>

<h1 id="fazit">Fazit</h1>

<p>Ja, mehr als Lernen kann man damit wirklich nicht machen. Verabschieden wir uns vom ‘schnellen Hack’ und wandern wir zum bewussten Nutzen von Technik.<br />
Jedes mal, wnen ich auf den Knopf drücke und die Tür zu meinem Auto auf geht, passiert ‘Etwas’. Dieses Etwas ist nur ein gezieltes manipulieren von Schwingungen um mich herum. Dabei spricht der Schlüssel nicht direkt mit dem Auto, sondern er brüllt den Code einmal in alle Richtungen. Aber entweder verstehen die anderen Geräte die Sprache (den Code) nicht oder dieser ist nicht für die anderen Autos gedacht. Daher reagiert nur mein Auto.<br />
Dabei ist in der Theorie die IR Fernbedienung gar nicht viel anders als der Autoschlüssel. Nur im Aufbau deutlich einfacher und ohne Rolling Code und ohne Crypto.</p>

<p>Wenn ich meinen Auto-Pieper oder die TV Fernbedienung nicht benutze, dann kann auch niemand etwas mitschneiden. Wenn jemand etwas mitschneiden kann und es ‘einfach kopiert’ (Replay Attacke), dann ist das eingesetzte Protokoll schrott. Das kommt seltener vor als man denkt, aber da die Medien sich auf jeden Fall stürzt und nicht gegenber stellt wie viele autos sicher sind, ist die Wirkung anders.<br />
Dann gibt es natürlich noch die, welche mit einem Laptop und einem SDR alles mitschneiden, die gängigen Codes kennen und den Rest mittels Brute Force (Vorschlaghammer) durchraten … wer diesen Aufwand betreibt um meine leere Jacke aus dem Auto zu klauen, der hat sich diese aber auch verdient.</p>]]></content><author><name>Benjamin Moeller</name></author><category term="experimente" /><category term="produkte" /><summary type="html"><![CDATA[Um Mitte 2020 herum haben ein paar Entwickler gedacht man könnte ein paar Antennen und einen kleinen Prozessor mit einem kompakten Display in ein Tamagotchi-Gehäuse stecken und so verschiedenste ‘Pentest Tools’ handlicher machen. Da das Entwicklung, und somit Geld uns Zeit kostet, haben sie die Idee auf Kickstarter im August 2020 angeboten. Das bedeutet sie schrieben was sie vorhaben, aber anstelle einem Banker einen Finanzierungsplan vorzulegen sucht man verrückte (interessanter Weise ‘Backer’ genannt) mit zu viel Geld aus dem Internet. Mein Bruder ist so einer, aufgrund der Idee hat er 232$ in den Topf geworfen, ohne zu wissen ob das Produkt jemals kommen wird. So wie viele Andere auch und anstelle der mindestens 60.000 USD kamen knapp unter 5 Mio zusammen.]]></summary></entry><entry><title type="html">Wohnmobil - Truma Inet X Panel</title><link href="http://blog.lupuse.org/wohnmobil/2022/05/31/wohnmobil-truma_inet_x_panel.html" rel="alternate" type="text/html" title="Wohnmobil - Truma Inet X Panel" /><published>2022-05-31T19:22:32+00:00</published><updated>2022-05-31T19:22:32+00:00</updated><id>http://blog.lupuse.org/wohnmobil/2022/05/31/wohnmobil---truma_inet_x_panel</id><content type="html" xml:base="http://blog.lupuse.org/wohnmobil/2022/05/31/wohnmobil-truma_inet_x_panel.html"><![CDATA[<p>Mit meiner Frau habe ich mich über das neue <a href="https://www.truma.com/de/de/produkte/inet-x-system/truma-inet-x-panel" target="\_blank">Truma Inet X Panel</a> unterhalten. Sie ist bisher morgens nach vorne zur <a href="https://www.truma.com/de/de/produkte/truma-inet-system/truma-bedienteil-cp-plus" target="\_blank">Truma CP Plus</a> gegangen und hat in der Kälte ein paar Grad nach oben geregelt um wärmer aufzuwachen.<br />
Jetzt hat mein Vater in seinem neuen <a href="https://weinsberg.com/wohnmobile/edition-pepper" target="\_blank">Wohnmobil</a> die das <a href="https://www.truma.com/de/de/produkte/truma-inet-system/truma-inet-set" target="\_blank">CP Plus inklusive der Inet Box</a>, mit der er die komplette Anlage aus dem Bett steuern kann. Die iNet Box kann mit <a href="https://www.truma.com/de/de/produkte/truma-inet-system/truma-app" target="\_blank">Android oder iOS App</a> bedient werden. Sie spricht lokal Bluetooth und für den Fernzugriff 2G (GSM). Das 2G Netz wurde in der Schweiz ende 2020 abgeschaltet. 2021 wurde bei uns in Deutschland das 3G (UMTS) Netz abgeschaltet, die Provider planen aber nicht das 2G Netz auch abzuschalten.</p>

<p>Meine Frau guckte mich mit grossen Augen an und fragte “…sollte ich etwa noch nicht bestellen?” …<br />
… also heute kam mein neues Truma Inet X Panel. Mit Touchsreen, Temperaturautomatik, …</p>

<h1 id="vorher">Vorher</h1>

<p>So haben wir unser <a href="https://4pfoten-mobile.de" target="\_blank">4-Pfoten-Mobil</a> bekommen.<br />
Links die <a href="https://www.truma.com/de/de/produkte/truma-klimaanlagen/truma-aventa-comfort" target="\_blank">Truma Aventa Comfort</a> Klimaanlagen-Fernbedienung. Oben das Dethleffs Panel. Unten mittig den Taster für die Abwasserheizung (Wintercamping geeignet) und daneben die Truma EisEx. Unten rechts das Truma CP Plus Panel für die <a href="https://www.truma.com/de/de/produkte/truma-heizungen/combi-6" target="\_blank">Truma Combi 6</a>. Der Punkt darunter ist das Truma Raumthermometer.<br />
Oben das hellblaue steht mein neuer Mobilerouter, das ist <a href="/wohnmobil/2022/05/15/wohnmobilnetzwerk-glinet_beryl.html">ein anderes Projekt</a>.<br />
<img src="/media/truma_inet_x/truma_x_panel-01_before.jpg" alt="Panel mit Truma CP Plus" /></p>

<h1 id="ausbau-truma-cp-plus">Ausbau Truma CP Plus</h1>

<p>Den Drehknopf nach vorne abziehen, darunter befindet sich eine Schraube. Wenn die rausgedreht ist, kann das Panel einfach nach vorne oben geklappt und abgenommen werden.<br />
<img src="/media/truma_inet_x/truma_x_panel-02_ausbau.jpg" alt="Truma CP Plus" /></p>

<p>Übrig bleiben der rote 12V Stromstecker und der RJ11 TIN Stecker. Bei uns direkt mit Y Adapter für Truma Combi6 und Aventa Comfort.<br />
Der Rahmen muss noch abgenommen werden.<br />
<img src="/media/truma_inet_x/truma_x_panel-04_ausbau.jpg" alt="Truma CP Plus - Kabel" /></p>

<p>Oben liegt das alte CP Plus auf dem Display. Im Karton sieht man das Inet X Panel, das deutlich breiter ist.<br />
<img src="/media/truma_inet_x/truma_x_panel-06_alt_vs_neu.jpg" alt="Truma CP Plus" /></p>

<h2 id="anpassungen-am-holz">Anpassungen am Holz</h2>

<p>Ganz ehrlich: Ich bin kein guter Handwerker. Ich stecke lieber als dass ich Säge und Fräse.</p>

<p>Ich bin davon ausgegangen ich bekomme den Holzkasten ab. Leider sind links zwei Schrauben im Panel, an die ich nicht komme, ohne das halbe Mobil zu zerlegen.<br />
<img src="/media/truma_inet_x/truma_x_panel-07_panel_leer.jpg" alt="Panel leer" /></p>

<p>Also erstmal ablenken und herausfinden wie ich die Blende der Menuknöpfe ab bekomme. Denn das steht nicht in der Anleitung … Ist einfach: Flachen Schraubendreher in die Seite.<br />
<img src="/media/truma_inet_x/truma_x_panel-08_front.jpg" alt="Panel leer" /></p>

<p>Nach rechts ist kein Platz um das Loch des CP Plus zu erweitern. Mit Glück würde es bündig mit dem Kasten abschließen (plusminus 1mm), dazu muss ich aber ein Stück eines Winkels (braun, wie oben rechts) weg fräsen.<br />
Sinnvoller erschien mir das Versetzen der EisEx und Abwassertankheizung und ausarbeiten nach links.<br />
<img src="/media/truma_inet_x/truma_x_panel-08_panel_3loch.jpg" alt="Ein drittes Loch" /></p>

<p>Das Loch habe ich sehr knapp gemesen (1. Schraube 5mm, 2. Schraube 49mm, dürfte gerne 6+49mm sein), so dass ich den Schalter für die Abwasserheizung nochmal setzen musste. Aber ich konnte jetzt das Panel anzeichen.<br />
Die Kabel habe ich desöfteren neu gelegt. Die meisten sind in ausreichender Länge, so dass sie nur aus dem Arbeitsbereich geschoben werden mussten. Ein paar ultra lange Kabel habe ich mit Kabelstrapsen versehen, bei der nächsten Aktion werden die wohl gekürzt.<br />
<img src="/media/truma_inet_x/truma_x_panel-09_einbau_eisex.jpg" alt="Einbau EisEx und Anzeichnen" /></p>

<h1 id="einbau">Einbau</h1>

<p>Passt genau. Um das halbe Loch mache ich mir später Gedanken.<br />
<img src="/media/truma_inet_x/truma_x_panel-10_einbau_panel.jpg" alt="Einbau Truma Inet X Panel" /></p>

<p>Sieh gut aus und funktioniert.<br />
<img src="/media/truma_inet_x/truma_x_panel-10_eingebaut.jpg" alt="Sieht gut aus und funktioniert" /></p>

<p><img src="/media/truma_inet_x/truma_x_panel-11_panel_menu.jpg" alt="Menu" /></p>

<h1 id="finale">Finale</h1>

<p>Natürlich habe ich die Klima-Fernbedienung vergessen.<br />
Schnell nachgeschraubt … Und das halbe Loch? Darüber mache ich mir VIEL später Gedanken.<br />
<img src="/media/truma_inet_x/truma_x_panel-19_final.jpg" alt="Fertig, zu 98%" /></p>

<h2 id="erster-eindruck">Erster Eindruck</h2>

<p>Die Bedienung auf dem Panel ist etwas träge. Ich weis aber, dass ich eine geringe Körperelektrizität habe und manchmal gerade kapazitive Touchscreens nicht gut funktionieren.<br />
Die Bedienung auf dem Handy über App ist auch träge, aber auf dem Handy gewohnt zuverlässig.<br />
Der Praxistest steht aus, meine Frau ist bisher begeistert.</p>

<p>Es wurde einiges an Funktionalität reduziert, da z.B: die Fernsteuerung aktuell nicht gegeben ist. Besonders gespannt bin ich auf die erste Fehlermeldung, das sollen keine cryptischen Codes mehr sein, sondenr nachvollziehbare Sätze.<br />
Leider ist die Steuerung der EisEx und DuoControl nur mit dem Pro Panel möglich, welches nur bei neuen Mobilen verbaut wird und nicht nachzurüsten ist.</p>]]></content><author><name>Benjamin Moeller</name></author><category term="wohnmobil" /><category term="reise" /><summary type="html"><![CDATA[Mit meiner Frau habe ich mich über das neue Truma Inet X Panel unterhalten. Sie ist bisher morgens nach vorne zur Truma CP Plus gegangen und hat in der Kälte ein paar Grad nach oben geregelt um wärmer aufzuwachen. Jetzt hat mein Vater in seinem neuen Wohnmobil die das CP Plus inklusive der Inet Box, mit der er die komplette Anlage aus dem Bett steuern kann. Die iNet Box kann mit Android oder iOS App bedient werden. Sie spricht lokal Bluetooth und für den Fernzugriff 2G (GSM). Das 2G Netz wurde in der Schweiz ende 2020 abgeschaltet. 2021 wurde bei uns in Deutschland das 3G (UMTS) Netz abgeschaltet, die Provider planen aber nicht das 2G Netz auch abzuschalten.]]></summary></entry><entry><title type="html">Wohnmobilnetzwerk - Gl.iNet Beryl</title><link href="http://blog.lupuse.org/wohnmobil/2022/05/15/wohnmobilnetzwerk-glinet_beryl.html" rel="alternate" type="text/html" title="Wohnmobilnetzwerk - Gl.iNet Beryl" /><published>2022-05-15T16:24:00+00:00</published><updated>2022-05-15T16:24:00+00:00</updated><id>http://blog.lupuse.org/wohnmobil/2022/05/15/wohnmobilnetzwerk---glinet_beryl</id><content type="html" xml:base="http://blog.lupuse.org/wohnmobil/2022/05/15/wohnmobilnetzwerk-glinet_beryl.html"><![CDATA[<h1 id="tldr">tl;dr</h1>

<p>Ich hatte erwartet hier wird ein grossartiges Projekt entstehen. Leider funktioniert die Lösung so gut, dass es nicht viel zu beschreiben gibt.</p>
<ol>
  <li>gl.iNet Router in gewünschter Ausstattung (und Preis) kaufen: <a href="https://www.gl-inet.com/products/">Gl.iNet Produkte</a></li>
  <li>An Strom anschliessen, mit warten bis die Lampe durchgehend leuchtet</li>
  <li>Mit den Daten auf der Unterseite anmelden</li>
  <li>‘Internet’ per Kabel, WLAN oder Tethering/USB Modem bereitstellen (siehe unten)</li>
  <li>Fertig</li>
</ol>

<p>Dabei gibt es folgende Wege für das Internet:</p>
<ul>
  <li>Kabel an den Netzwerkport WAN anschliessen. Am einfachsten, gut zum ersten Einrichten, aber selten sinnvoll beim Camping.</li>
  <li>WLAN Bridge. Unter <strong>Internet</strong> <strong>Repeater</strong> den Button <strong>Scan</strong> klicken, das entsprechende WLAN auswählen, das Passwort eingeben und <strong>Join</strong>/Beitreten klicken. (siehe ‘Tipp’). Das Mittel der Wahl auf dem Campinglplatz, in Kombination mit VPN auch für öffentliche WLAN.</li>
  <li>USB-Tethering. An den USB Port ein Mobiltelefon oder Tablet mit Internet anschliessen, am Telefon/Tablet ‘Tethering’ freigeben. Für alle Fans des 100% autarken Camping.</li>
  <li>USB-Modem. Noch nicht getestet.</li>
</ul>

<blockquote>
  <p>TIPP: In der aktuellsten Firmware (3.211) gibt es anscheinend 2 Bugs. Der eine betrifft die gesetze Zeit, welche unter Umständen das Verbinden zu WLAN mit Key verhindert. An diesem <a href="https://forum.gl-inet.com/t/20556">arbeitet Gl.iNet anscheinend gerade</a> und vermutlich ist es in der aktuellen Beta behoben. Zum Anderen scheint es ein nicht näher beschriebenes <a href="https://forum.gl-inet.com/t/gl-inet-router-says-wrong-key-on-wifi-repeater-join/20556/37">Problem mit Fritz!Boxen</a> zu geben, wegen dem man auf der Firmwareversion 3.203 bleiben sollte.</p>
</blockquote>

<hr />

<h1 id="vorgeschichte">Vorgeschichte</h1>

<p>Heutzutage benötigt man Internet, auch im Urlaub. Nicht nur als Roadwarrior (arbeiten von Unterwegs), auch um Up-to-Date zu bleiben oder Urlaubsphotos zu posten. Vielleicht möchte man am Abend ein Video oder Musik streamen. Und wenn Kinder ab einem gewissen Alter mit reisen, dann ist das Internet unterwegs nicht mehr optional.</p>

<p>Für Wohnmobile werden unterschiedliche Systeme angeboten und in Fachliteratur getestet:</p>
<ul>
  <li>Zum Einen gibt es Pocketrouter (‘Mobile Ostereier’) für 40-150 Euro. Diese werden oft mit einer billigen SIM-Karte, meist PrePaid, betrieben und sind durch den internen Akku auch ausserhalb der Wohnmobils flexibel. Aber diese Lösung ist auf das Mobilfunk-Netz angewiesen. Nachdem was ich weis eher für den gelegentlichen Ein-Personen-Gebrauch eines Tablet/Notebook. Im Ausland kann man einfach eine lokale Karte kaufen und einsetzen. Roaming sollte innerhalb der EU kein Thema mehr sein. Die Systeme gibt es im Angebot von TCM (Tchibo) oder AldiTalk. Dies machen Sinn um autark zu stehen, in Kombination mit meiner beschriebenen Lösung.</li>
  <li>Zum Anderen gibt es, oft aus dem Bootsbereich, mehr oder weniger klobige Boxen, fest montiert auf dem Dach. Diese bieten deutlich mehr Leistung und mehr Anbindung, z.B. Mobilfunk und WLAN vom Campingplatz. Für 300-900 Euro oder mehr. Bald kommt 5G und ich habe von keinem Gerät gelesen, welches sich ‘einfach’ aufrüsten lässt. Auch ein Faktor: Meine Frau möchte keine zusätzlichen Löcher in ihr Wohnmobil gebohrt haben.</li>
  <li>Dazwischen gibt es um die 200-400 Euro noch ein paar portable Lösungen, die sicher auch funktionieren. Oft leiden diese unter einem oder mehr Nachteile der vorgenannten Lösungen, aber einige bieten eine sehr gute Übersicht über den aktuellen Datenverbrauch. Die bekanntesten dieser Klasse sind wohl die <a href="https://www.netgear.com/de/home/mobile-wifi/hotspots/">Netgear Hotspot</a> Modelle.</li>
</ul>

<p>Ich war auf der Suche nach einem kleinen, flexiblen und günstigen Router, der mir im Wohnmobil ein gutes Netzwerk gibt und auch kaputt gehen darf, ohne dass es weh tut.</p>

<h2 id="recherche">Recherche</h2>

<p>Vor einigen Wochen habe ich einen Microrouter der Firma <a href="https://www.gl-inet.com/">Gl.iNet</a> gesehen. Der GL-AR300M-Ext ist eine kleine Box für etwa 32 Euro auf Amazon, mit zwei austauschbaren Antennen. Die Box stellt eine sogenante ‘Bridge’, übersetzt also ein gegebenes Netzwerk in ein eigenes (Network Adress Translation/NAT). Wie das Internet zuhause mit einem Router in das Heimnetzwerk gewandelt wird. Das bedeutet ich kann entweder ein WLAN aufnehmen und das über den LAN Port weiter geben (Laptop ohne WLAN-Karte) oder ich kann ein LAN an die Box anschliessen und ein eigenes WLAN zur Verfügung stellen.</p>

<blockquote>
  <p>Zu kompliziert? Kurz: Ich kann alles in mein eigenes WLAN übersetzen.</p>
</blockquote>

<p>Interessant für uns Camper: Durch mehrere Antennen kann ich mit geringem Verlust ein externes WLAN (Campingplatz) aufnehmen und daraus ein eigenes lokales WLAN für alle Geräte in der Nähe bereitstellen. Für das Wohnzimmer auf Rädern perfekt. Durch tauschbaren Antennen könnte ich, ohne die Leistung physikalisch zu ändern, vollkommen legal mehr Reichweite durch Richtwirkung erhalten.<br />
Die Firma Gl.iNet (Gl steht für Goodlife) kommt aus China, wo das Privatleben im Internet eine ganz andere Gewichtung hat. Also stellt die Box zusätzlich noch ein VPN als Client oder Server zur Verfügung. Das ist für uns nicht ganz so wichtig, aber es ist eine zentrale Funktion und sehr gut umgesetzt, dazu in einem später mehr.</p>

<p>Als Informatiker habe ich mir das Datenblatt angesehen und so richtig hat es mich doch nicht überzeugt. Was bieten die anderen Modelle des Herstellers?</p>
<ul>
  <li><a href="https://www.gl-inet.com/products/gl-ar300m/">GL-AR300M</a> (Shadow)/<a href="https://www.gl-inet.com/products/gl-mt300n-v2/">GL-MT300N-V2</a> (Mango) sind kleine günstige Boxen, mit verschiedener Ausstattung. Vergleichbar mit der zuerst erwähnten.</li>
  <li>Die <a href="https://www.gl-inet.com/products/gl-ar750s/">GL-AR750S</a> (Slate) hat einen deutlich stärkeren Prozessor und mehr RAM (Arbeitsspeicher) und sollte für die meisten Anwendungen im Wohnmobil ausreichen. Stromverbrauch &lt;6W laut Datenblatt. Für 75 Euro okay.</li>
  <li>Der <a href="https://www.gl-inet.com/products/gl-mv1000/">GL-MV1000W</a> (Brumme-W), derzeit nicht verfügbar.</li>
  <li>Der <a href="https://www.gl-inet.com/products/gl-sft1200/">GL-SFT1200</a> (Opal) hat einen geringen Strombedarf (2A Netzteil), bei der Unterstützung moderner WLAN-Protokolle und einem schnellen Prozessor. Für unter 50 Euro auch erschwinglich. 2 feste WLAN Antennen. Preis-/Leistungssieger.</li>
  <li>Der <a href="https://www.gl-inet.com/products/gl-mt1300/">GL-MT1300</a> (Beryl) ist es bei mir geworden, da es das einzige Modell ist, welches zu dem Zeitpunkt bei Auslieferung IPv6 spricht. Ein Feature, welches den meisten Wohnmobilisten recht egal sein dürfte, mir aber besonders wichtig war. Für fast 80 Euro dann hart an der Grenze zum ‘mal kaufen und schauen was daraus wird’. Wie zuvor auch nur mit festen WLAN Antennen.</li>
</ul>

<p>Alle diese Lösungen haben keine SIM-Karte, sind aber einfach mittels USB-Modem oder USB-Tethering mit der derzeit aktuellen oder erschwinglichen Technik auszustatten.</p>

<h3 id="vergleichstabelle">Vergleichstabelle</h3>

<table>
  <thead>
    <tr>
      <th>Bezeichnung (Name)</th>
      <th>CPU</th>
      <th>RAM</th>
      <th>Speicher</th>
      <th>WLAN</th>
      <th>USB</th>
      <th>Ethernet</th>
      <th>Micro SD</th>
      <th>IPv6</th>
      <th>Power</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GL-AR300M-Ext (Shadow)</td>
      <td>QC9531 @650MHz</td>
      <td>DDR2 128MB</td>
      <td>16MB</td>
      <td>300Mbps (2,4GHz)</td>
      <td>1x 2.0</td>
      <td>2x 10/100</td>
      <td>Nein</td>
      <td>Nein</td>
      <td>5V/1A USB-C (&lt;2W)</td>
    </tr>
    <tr>
      <td>GL-MT300N (Mango)</td>
      <td>MT7628NN @580MHz</td>
      <td>DDR2 128MB</td>
      <td>16MB</td>
      <td>300Mbps (2,4GHz)</td>
      <td>1x 2.0</td>
      <td>2x 10/100</td>
      <td>Nein</td>
      <td>Nein</td>
      <td>5V/1A USB-C (&lt;2,75W)</td>
    </tr>
    <tr>
      <td>GL-AR750S (Slate)</td>
      <td>QCA9563 @775MHz</td>
      <td>DDR2 128MB</td>
      <td>16MB/128MB NAND</td>
      <td>300Mbps (2,4GHz), 433Mbps (5GHz)</td>
      <td>1x 2.0</td>
      <td>3x 1GB</td>
      <td>max 128GB</td>
      <td>Nein</td>
      <td>5V/2A USB-C (&lt;6W)</td>
    </tr>
    <tr>
      <td>GL-MT1300 (Beryl)</td>
      <td>MT7621 @880MHz</td>
      <td>DDR3L 256MB</td>
      <td>32MB</td>
      <td>400Mbps (2,4GHz), 867Mbps (5GHz)</td>
      <td>1x 3.0</td>
      <td>3x 1GB</td>
      <td>max. 512GB</td>
      <td>Ja</td>
      <td>5V/3A USB-C (&lt;8,65W)</td>
    </tr>
    <tr>
      <td>GL-SFT1200 (Opal)</td>
      <td>SF19A28 @1GHz</td>
      <td>DDR3 128MB</td>
      <td>SPI NAND 128MB</td>
      <td>300Mbps (2,4GHz), 867Mbps (5GHz)</td>
      <td>1x 2.0</td>
      <td>3x 1GB</td>
      <td>Nein</td>
      <td>Ja</td>
      <td>5V/3A USB-C</td>
    </tr>
  </tbody>
</table>

<h2 id="meine-lösung-glinet-gl-mt1300-beryl">Meine Lösung: Gl.iNet GL-MT1300 (Beryl)</h2>

<p>Er ist der teuerste der untersuchten Modelle. Meine Entscheidung hat besonders die Unterstützung von IPv6 und der Einsatz einer SD Karte beeinflusst. Wem das nicht wichtig ist, der wird mit dem GL-SFT1200 (Opal) 30 Euro günstiger weg kommen. Wem bisher nur stört, dass das Android Telefon/Tablet kein WLAN-WLAN Tethering kann, der kann die deutlich günstigeren Shadow/Mango Boxen in Betracht ziehen.<br />
Den Beryl kann ich mit einer bis zu 512GB großen SD Karte füttern und per FTP Daten oder per DLNA Medien bereitstellen. Unser Fernseher im Wohnmobil ist nicht smart, das wäre für mich der einzig sinnvolle Einsatz. Aber vielleicht spiele ich mit dem Chromecast rum. Ich werde berichten…</p>

<p>Zunächst fragte ich mich, warum er nach Spezifikation unbedingt ein 5V/3A Netzteil verlangt, obwohl der Verbrauch mit &lt;8,65W angegeben ist (8,65W/5V=1,75A). Beim Testen ging mir dann ein 15 Watt Licht auf. Ein Mobiltelefon am USB Port will ja auch mit Strom versorgt werden. Wenn dieses 2,1A zieht, dann hat das Board nicht mehr genügend Strom.<br />
Tethering = Mobilfunk oder WLAN vom Mobiltelefon/Tablet weitergeleitet. Meist über USB.</p>

<p>Die Kaufentscheidung hängt ab von:</p>
<ul>
  <li>Binde ich das Gerät ins WLAN, per Kabel ein oder Tethering? Oder will ich flexibel alle Möglichkeiten haben?</li>
  <li>Wie viel Strom habe ich zur Verfügung? Bei 3A muss ich mir Gedanken machen, während ich bis 2,1A einfach an (fast) jedem USB Port betreiben kann. Brandgefahr bei Missachtung!</li>
  <li>Will ich jetzt oder später Medien per DLNA im Wohnmobil bereitstellen? (MicroSD Slot, genug CPU/RAM)</li>
  <li>Will ich daraus noch weitere DIY Projekte bauen? Dann sollte die Box GPIO Pins bieten, um z.B. den TIN Bus der Truma auszulesen?</li>
  <li>IPv6 wird allgemein weniger eine Rolle spielen, da es über OpenWRT sicher nachgereicht wird, sobald es salonfähig ist.</li>
  <li>Wenn ich VPN und andere Dienste zeitgleich nutzen will muss, muss ich zusätzlich auf MHz und RAM achten.</li>
</ul>

<p>Die Größe des Wohnmobil/-wagen spielt kaum eine Rolle, bis 12m Länge sollte es problemlos im 5GHz Band auszuleuchten sein. Wichtiger ist die Außenwand. Ein Kastenwagen mit Metallchassis dämpft den Empfang deutlich mehr als die GFK Wand eines Aufbau. Die kleinen Boxen kann man sehr gut fensternah verstauen.</p>

<h3 id="ersteinrichtung-kabel">Ersteinrichtung (Kabel)</h3>

<p>Ich habe den Luxus, dass mein Wohnmobil direkt vor der Tür steht. Das bedeutet ich konnte so tun als wäre mein Haus-WLAN ein Campingplatz. Aber bevor ich raus gegangen bin, habe ich die kleine Box an meinem Schreibtisch ausgiebig getestet.</p>

<p>Die Ersteinrichtung war super einfach:</p>
<ul>
  <li>Auspacken, Strom dran, LAN an Laptop, warten bis die LED dauerhaft leuchtet</li>
  <li>Browser öffnen und auf <a href="http://192.168.8.1">http://192.168.8.1</a> gehen</li>
  <li>
    <p>Beim ersten Login Sprache einstellen und Adminpasswort vergeben</p>
  </li>
  <li>In der Weboberfläche auf <strong>Wireless</strong>/Kabellos</li>
  <li>Zuerst habe ich das WLAN umbenannt (SSID) in LupusEmobi24 und LupusEmobi5 und einen eigenen Key vergeben. Dei GastWLAN habe ich ausgeschaltet gelassen.
    <ul>
      <li>Tipp: Man kann auch den gleichen Namen (SSID) und Key wie zuhause verwenden, dann können sich alle Geräte (z.B. Xbox/Playstation/Switch) auch unterwegs mit den gleichen Daten anmelden. Das geht nicht zum lokalen Testen.</li>
      <li>Auf gar keinen Fall die Standardeinstellungen lassen. Wer als SSID ‘GL-…’ sieht, wird gleich das Kennwort ‘goodlife’ versuchen. Wird nur die SSID umbenannt, könnte anhand der MAC Adresse ein Gl.iNet Gerät identifiziert werden.
<img src="/media/router_beryl/browser_beryl_wireless.png" alt="Browser Wireless" /></li>
    </ul>
  </li>
</ul>

<p>Wer plant eine Fritz!Box einzusetzen, NICHT upgraden! Es gibt einen nicht näher beschriebenen Bug in der aktuellen Firmware. Gl.iNet arbeitet wohl dran. Leider ist genau dieser Teil der Software (Netzwerktreiber) Closed Source. Aber die Gute Nachricht: Bis Firmware 3.203 funktioniert es. <a href="https://forum.gl-inet.com/t/gl-inet-router-says-wrong-key-on-wifi-repeater-join/20556/34">Quelle</a><br />
Ein Firmwareupdate (3.211) ist verfügbar. Über den Menüpunkt links <strong>Upgrade</strong>/Aktualisierung hat die Box auf Buttonklick das Image aus dem Internet geladen und auf weiterem Klick installiert.<br />
Möchte man ein Downgrade (Letzte Version installieren), dann geht das nicht automatisch, aber auch einfach: Das Image von der Webseite herunteladen und im nächsten Reiter (Local Upgrade/lokale Aktualisierung) auf den Router hochladen, der Rest ist gleich.</p>

<p>Vor der Installation hat man die Möglichkeit auszuwählen ‘Keep Settings’/Einstellungen beibehalten und ‘Keep installed Packages’/Installierte Pakete behalten. Aktuell wähle ich diese Optionen ab, da mit einem Firmwareupdate neue und verbesserte Funktionen und unter Umständen auch geänderte Konfigurationen kommen. Wenn der Router ein paar Monate läuft und einige individuelle Konfigurationen zusammen kommen, dann kann man die Einstellung übernehmen. Der Versionssprung sollte dabei nicht zu gross werden. Auf jeden Fall vorher eine Sicherung machen, falls das Update beim Übernehmen der Daten fehlschlägt.</p>

<p><img src="/media/router_beryl/browser_beryl_upgrade.png" alt="Browser Upgrade" /></p>

<blockquote>
  <p>TIPP: Ich habe ein Notebook für solche Aufgaben, aber manchmal hat man nur ein Mobiltelefon oder Tablet zur Verfügung. Anstelle eines Kabel kann man sich auch direkt per WLAN verbinden.<br />
Mit dem unter der Box aufgedruckten WLAN verbinden. Entweder GL-MT1300-xxx (2,4GHz) oder GL-MT1300-xxx-5G (5GHz). Der Key ist immer ‘goodlife’. Bei anderen Modellen ist die SSID ähnlich: GL-[Modellnummer]-[Letzten 3 Zeichen der MAC].</p>
</blockquote>

<h3 id="einrichtung-wlan-zu-wlan">Einrichtung (WLAN zu WLAN)</h3>

<p>Nach dem grundlegenden Einrichten bekam das Gerät im Menü links unter <strong>Internet</strong> die Zugangsdaten zu meinem Heim-WLAN. Fertig.</p>

<p><img src="/media/router_beryl/browser_beryl_internet.png" alt="Browser Internet" /></p>

<p>Ich nutze vom Endgerät (Handy/Tablet) das 5GHz Netz, weil ich meist WLAN auf WLAN haben möchte.<br />
Das 2,4GHz Netz hat die bessere Reichweite, das 5GHz Netz hat den besseren Durchsatz. Reichweite benötige ich auf 2,33mx7,40m nicht, aber draussen. Wenn ich innen und außen auf jeweils einem anderen Band funke, sorge ich gleichzeitig für weniger Störungen untereinander.</p>

<h3 id="feintuning-tethering">Feintuning (Tethering)</h3>

<p>Im Menupunkt <strong>Internet</strong> ist die Option <strong>Tethering</strong> ausgegraut.<br />
Wenn ein Android Telefon an ein System angeschlossen wird, dann steht im Drop-Down (vom oberen Bildschirmrand nach unten ziehen) ‘Android-System - Gerät wird über USB aufgeladen / Für weitere Optionen tippen)’, tippe ich da drauf komm eich in ‘USB-Einstellungen’ und kann ‘USB-Tethering’ (neben z.B. ‘Dateiübertragung’) auswählen. Ab sofort kann ich <strong>Tethering</strong> in der Box auswählen.<br />
USB-Tethering bedeutet, dass das Mobiltelefon die vorhandene Internetverbindung über den USB Port zur Verfügung stellt. Dabei interessiert dem Gerät am USB Port nicht ob es sich um eine WLAN oder Mobilfunkverbindung handelt. Sollte ich also ein Mobiltelefon mit sehr guter WLAN-Antenne besitzen, kann ich sogar ganz auf ein WLAN Modul im Router verzichten. Dabei gilt aber zu beachten, dass in dem Fall auch immer 2 Geräte mit Strom versorgt werden müssen.</p>

<p>In unserem Fall hat meine Frau ihr altes <a href="https://de.wikipedia.org/wiki/Sony_Xperia_Z3_Compact">Sony Xperia Z3 Compact</a> zur Verfügung gestellt. Wir haben bei O2 eine Datenkarte zu ihrem Vertrag bestellt, da sie Europaweit 120GB LTE Datenvolumen pro Monat hat, ohne Telefonie.</p>

<p>Die Box kann auch direkt mit Linuxfähigen USB-Modems umgehen. Dabei empfiehlt es sich bei den meisten Systemen die PIN der Datenkarte zu deaktivieren. Da ich nur einen 3G Stick (Huawai E1750) mit anderer SIM-Größe hier habe, habe ich es noch nicht getestet.</p>

<hr />

<h1 id="technisch">Technisch</h1>

<p>Die Box besitzt eine OpenWRT Firmware mit eigener Gl.iNet Weboberfläche. Die Oberfläche benutzt einiges an Scripting, das bedeutet auf alternativen (LineageOS) oder sehr eingeschränkten (NoScript Plugin) Browsern muss gelegentlich per Hand nachgeladen werden. Generell funktioniert aber alles.<br />
Es wird eine App angeboten um die Verwaltung noch bequemer zu gestalten.</p>

<p>Das gelieferte OpenWRT ist aktuell in der Version 19.07.7. Wer gerne basteln mag bekommt auf der OpenWRT Seite aktuelle Images, für den Beryl aktuell die Version 21.<br />
https://openwrt.org/toh/views/toh_tfdownload &lt;- suchen nach ‘Brand = gl.inet’</p>

<p>Alle Weboberflächen nutzen http anstatt https. Da wir mit einem Microcomputer arbeiten und das ausschliesslich im privaten LAN konfigurieren, verzichtet man auf den Overhead der Verschlüsselung und einer unschönen Sicherheitswarnung im Browser.</p>

<h2 id="was-ist-openwrt">Was ist OpenWRT?</h2>

<p><a href="https://openwrt.org">OpenWRT</a> ist ein offenes Routerbetriebssystem auf Linux Basis, mit dem Paketmanager <strong>opkg</strong>.<br />
Da bestimmt 95% der im Alltag vorkommenden Konfigurationen über die LuCI Weboberfläche erledigt werden können, ist dieses System für den ambitionierten Anwender nicht schwieriger zu benutzen als eine AVM Fritz!Box.<br />
Die Standarddialoge sind meist gut auf deutsch übersetzt.</p>

<h2 id="luci-web-ui">LuCI Web UI</h2>

<p>Die Gl.iNet Weboberfläche ist übersichtlich, aber bietet nicht alle Option die mit OpenWRT möglich sind. Dazu eignet sich besser die OpenWRT Weboberfläche LuCI.<br />
Dazu auf <a href="http://192.168.8.1/cgi-bin/luci">http://192.168.8.1/cgi-bin/luci</a> gehen, oder im Menü ganz unten auf <strong>More Settings</strong> den Unterpunkt <strong>Advanced</strong> auswählen. Wenn die Oberfläche nicht installiert ist, kann sie mit dem Button ‘Install’ nachinstalliert werden. Wenn die Oberfläche installiert ist, wird der Link angezeigt. Der Benutzer ist ‘root’ und das Passwort wieder das zuerst vergebene.</p>

<p><img src="/media/router_beryl/browser_beryl_luci_overview.png" alt="Browser LuCI" /></p>

<h2 id="länderkonfiguration">Länderkonfiguration</h2>

<p>Wie erwähnt kommt die Box aus China, demnach ist die Konfiguration auch darauf ausgelegt. man merkt es kaum, die offensichtlichste Auswirkung sind die erlaubten WLAN Kanäle im 2,4GHz Band: 1-11, bei uns 1-13. Daher kann es sein dass das eigene oder das Campingnetz nicht gefunden wird, wenn diese als WLAN Kanal 12 oder 13 konfiguriert haben.</p>

<p>Um das Problem zu beheben loggt man sich per SSH auf die Box ein. Unter Windows per <code class="language-plaintext highlighter-rouge">PuTTY</code> oder unter Linux/Mac mit <code class="language-plaintext highlighter-rouge">ssh</code> aus dem ‘OpenSSH’ Paket. Erlaubt ist nur ssh-rsa als Algorithmus. Daher gibt man auf der Konsole den folgenden Befehl ein:<br />
<code class="language-plaintext highlighter-rouge">ssh -oHostKeyAlgorithms=+ssh-rsa root@192.168.8.1</code><br />
… als Passwort gibt man das im ersten Schritt gesetzte ein. Dann bearbeitet man die Konfigurationsdatei mit <code class="language-plaintext highlighter-rouge">vim /etc/config/wireless</code></p>

<p>Mit der Taste <code class="language-plaintext highlighter-rouge">[i]</code> kommt man in den editier-Modus.<br />
Firmware 3.203: 2x die Zeile <strong>option Country ‘CN’</strong> mit <strong>option Country ‘DE’</strong> ersetzen. Zusätzlich in beiden Blöcken (2,4GHz und 5GHz) <strong>option region ‘1’</strong> (von 0) und <strong>option aregion ‘1’</strong> setzen um den Europäischen Regularien gerecht zu werden.<br />
Firmware 3.211: Im Block mit <strong>option Band ‘5g’</strong> den Eintrag auf <strong>option region ‘1’</strong> setzen (zuvor 10). Im Block <strong>option Band ‘2g’</strong> kontrollieren, dass <strong>option region ‘1’</strong> gesetzt ist.<br />
<a href="https://blog.csdn.net/linbounconstraint/article/details/80899321">Details zu den Werten</a> und <a href="https://en.wikipedia.org/wiki/List_of_WLAN_channels">Wikipedia List of WLAN channels</a><br />
Aus dem Editor (vim) kommt Ihr mit der Tastenfolge: <code class="language-plaintext highlighter-rouge">[Esc][:][x][Enter]</code>. Es gibt auch die Variante <code class="language-plaintext highlighter-rouge">[:][w][q]</code> (write quit), das kommt auf das selbe hinaus. Nach einem Neustart des Routers werden die neuen Werte automatisch in die Treiberkonfigurationen unter /etc/Wireless/… geschrieben.</p>

<blockquote>
  <p>TIPP: Hier sollte nicht zu viel gespielt werden, denn die falschen Einstellungen können Störungen in anderen Geräten verursachen und sind daher illegal (kein Scherz)!<br />
Sollten die Sende-/Empfangswerte zu niedrig sein, lieber in eine Richtfunkantenne investieren.</p>
</blockquote>

<h2 id="glinet-app">glinet App</h2>

<p>Die App Kann entweder über den Google Playstore oder dem Apple AppStrore heruntergeladen werden. Oder direkt von der <a href="https://www.gl-inet.com/app/">Website</a>.<br />
Die App bietet weniger Möglichkeiten als die Weboberfläche, aber alles schöner aufbereitet und die relevanten Funktionen hat man ohne viel geklicke in der Hand. Funktioniert gut.</p>

<p>Wenn ich ein VPN nutzen möchte, kann ich dieses sehr einfach und komfortabel per QR-Code in der App einrichten. Alternativ kann ich die Konfigurationsdatei auch in den entsprechenden Browser Dialog ziehen oder alles manuell eintippen.</p>

<p>Insgesamt reagiert die App schnell und ist übersichtlich. Es gibt keinen Grund die Arbeit nicht damit zu vereinfachen. Es muss nur zum Start die Cloud ignoriert werden. Alles funktioniert super lokal.<br />
Auf der ersten Seite finden sich die wichtigsten Punkte um sich im Netzwerk zurechtzufinden. Am untersten Rand ist das Menü um zu den weiteren Seiten zu kommen.</p>

<p>Gl.iNet App Mit VPN aus (erstes Bild) oder ein (zweites Bild). Der Klick auf das Symbol überschreibt die Einstellung des Hardware-Schalter (siehe Abschnitt VPN).<br />
<img src="/media/router_beryl/N7glinet_app-1_home_VPNoff.png" alt="Gl.iNetApp Home VPN Off" /> <img src="/media/router_beryl/N7glinet_app-2_home_VPNon.png" alt="Gl.iNetApp Home VPN On" /></p>

<p>Die zweite Seite bietet alle Möglichkeiten in das Internet zu kommen, sehr ähnlich der Weboberfläche. Die dritte Seite beitet einen Überblick der lokal verbundenen Geräte, mit der Möglichkeit diese auch mit einem Klick zu blocken oder ‘als Favoriten’ zu markieren.</p>

<p>Eine Übersicht der möglichen Internetzugänge und der Clients im lokalen Netzwerk.<br />
<img src="/media/router_beryl/N7glinet_app-3_network.png" alt="Gl.iNetApp Network" /> <img src="/media/router_beryl/N7glinet_app-4_clients.png" alt="Gl.iNetApp Clients" /></p>

<p>Das letzte Fenster bietet einen Schnellzugriff auf einige Systemeinstellungen. Das wichtigste sollte hier die Zeit sein, aufgrund des zuvor genannten Bug.<br />
<img src="/media/router_beryl/N7glinet_app-5_system.png" alt="Gl.iNetApp Network" /></p>

<h2 id="vpn">VPN</h2>
<p>Vorweg: Wer nach dem Lesen dieses Absatz weniger versteht als vorher, dieser Abschnitt ist wichtig für die Privatsphäre, nicht für die grundlegende Funktion. Wenn ich zuvor einfach jedes Gerät in das Campingplatz WLAN angemeldet habe, dann macht es jetzt auch keinen Unterschied.</p>

<p>Es werden diverse VPN Provider und unterschiedliche Protokolle von Haus aus unterstützt. Da ich mir in der Vergangenheit die Zähne an IPSec und OpenVPN ausgebissen habe, habe ich diese Runde an <strong>WireGuard</strong> vergeben.<br />
WireGurad ist ein recht junger Ansatz, welcher sich durch schnelle/einfache Einrichtung (das sagen sie Alle) und Schonung der Ressourcen (mehr Netzwerkgeschwindigkeit) auszeichen soll. Dabei kommen modernste Crypto Standards zum Einsatz, welche nach heutigem Stand als als sicher gelten.<br />
Bei mir Zuhause laufen 2 Proxmox Host, als Virtualisierungslösung verschiedenster Dienste. Schnell ist ein neuer Container (LXC/Ubuntu) erstellt: [x] 8GB HDD, [x] 512MB RAM, [x] 1 CPU Kern und eine [x] Netzwerkkarte mit Internetzugriff. Ein unpriviligierter Container ist ausreichend.</p>

<p><code class="language-plaintext highlighter-rouge">root@walter:~# wget git.io/wireguard -O wireguard-install.sh &amp;&amp; bash wireguard-install.sh</code><br />
Ich bin kein Fan davon Services per Script aus dem Internet auszuführen. Aber für den Test genügt es, ich habe mir das Script vor dme Ausführen natürlich angesehen. Es prüft die Umgebung, macht diese bereicht für Wireguard und automatisiert eine Reihe von Befehlen, die man sonst per Hand abtippt. Das Script kann beliebig oft ausgeführt werden, um weitere VPN Clients hinzuzufügen oder vorhandene zu bearbeiten.<br />
Der Befehl <code class="language-plaintext highlighter-rouge">bash wireguard-install.sh</code> stellt ein paar Fragen. Als erstes den Namen der neu angelegten Verbindung, dann ein paar Details zu Hostname (Server), Port (Forwarding) und so weiter. Der Name ist wichtig, da so nachher auch die Datei im aktuellen Verzeichniss heisst. Das Einrichten eines weltweit verfügbaren Hostnamen oder die Portweiterleitung (Standard: 51820/UDP) würde hier den Rahmen sprengen, dafür gibt es bessere Tutorials.<br />
Zum Schluss wird ein QR-Code auf der Console angezeigt, den man mit einem Telefon scannen kann. Die glinet App bietet das Einrichten der VPN Verbindung via QR Code. Das funktioniert sehr gut.</p>

<p>Da ich die Verbindung zuerst erstellt habe und erst später den Router eingerichtet, musste ich den Code erneut generieren, mittels:<br />
<code class="language-plaintext highlighter-rouge">root@walter:~# qrencode -t ansiutf8 &lt; beryl.conf</code></p>

<blockquote>
  <p>TIPP: Der QRCode sollte nie lesbar veröffentlicht werden und auch lokal behandelt, wie ein Passwort. Wer diesen hat, kann mit jedem beliebigen Gerät über einen WireGuard Client in Euer VPN!</p>
</blockquote>

<p>Die Bandbreite beim Test war limitiert durch den Versuchsaufbau. Daher gibt es noch keine Testergebnisse.</p>

<p>Alle Gl.iNet Router bieten einen Hardware-Switch, über den ich verschiedene Aktionen steuern kann. Zum Beispiel kann ich darüber das VPN schnell ein- und ausschalten. Zuhause, per Mobilfunk und in vertrauenswürdigen Netzen kann ich das VPN ausschalten. Wenn ich das offene WLAN bekannter FastFood Ketten oder das Campingnetz nutze, kann ich das VPN einschalten. Vorausgesetzt ich habe ein dauerhaft verfügbaren VPN Server/Provider mit gutem Duchsatz!</p>

<p>Wer keinen eigenen Server bereitstellen oder nutzen kann, dem steht offen halbwegs privat/anonym das TOR Netzwerk zu nutzen.</p>

<hr />

<h1 id="zukunft">Zukunft</h1>

<ul>
  <li>Ich werde das Gehäuse noch aufbrechen um zu sehen was ich dort für Antennen unter bekomme für optimalen Empfang. Ich stelle mir z.B. eine Ringantene aus einem 17” Laptop vor, die um die Dachlucke kommt. Das ist nicht schlimm, Gl.iNet stellt dafür sogar eine Anleitung bereit. Die Garantie verliert man trotzdem.</li>
  <li>Ein wichtiger Punkt mit Kindern ist der Datenverbrauch. Mit dem Paket vnStat kann man den Datenverbrauch im OpenWRT pro Interface gut darstellen, aber mir fehlt noch ein Tool um per Quota beim Erreichen des Tageslimit einfach den Dienst abzustellen (oder noch besser auf eine andere verfügbare Lösung zurückzugreifen. Hier bin ich noch darauf angewiesen, dass entweder das Mobiltelefon (Android) oder der Provider beim Erreichen eines Grenzwert abschaltet.</li>
  <li>Praxistest. In der Theorie war bisher alles super, aber ob sich die Werte auf dem Campingplatz auch erreichen lassen? Ich bin derzeit zuhause mit 600MBit Glasfaster angebunden und verteile das WLAN über 3 strategisch verteilte Router im Mesh, also ganz ähnlich einem besser ausgestattetem Campingplatz. Davon kommt zwar nur ein Bruchteil über den Router am Endgerät an, aber es reicht um mit 3 Geräten flüssig Youtube zu streamen.</li>
  <li>Das mitgelieferte 5V/3A Netzteil ist natürlich für den Start ganz gut, unterwegs möchte ich aber mehr Autark stehen. Daher werde ich noch ein Spannungswandler DC DC 12V auf 5V/3A verbauen. Auf Amazon gibt es verschiedene Lösungen, auch mit vorkonfektionierten USB Stecker <a href="https://www.amazon.de/dp/B09B7X3XKH/">Beispiel</a>. Solange kein LTE notwendig ist, sollte auch ein normaler USB Stromstecker reichen. Leider habe ich gerade kein Labornetzteil zum Testen zur Verfügung, ich werde vieleleicht mit einem Multimeter zuhause einen Testaufbau wagen, bevor ich die Leitungen im Mobil riskiere.</li>
  <li>Langfristig werde ich mir das neue <a href="https://www.truma.com/de/de/produkte/inet-x-system/truma-inet-x-panel">Truma iNet X Panel</a> einbauen. Dieses hat noch kein ‘eigenes Modem’, sondern nur Bluetooth. Für diesen Einsatz ist mir wichtig bequem alle anderen Datenverbraucher abschalten zu können. Das benötigt noch einen <a href="https://www.gl-inet.com/products/gl-s10/">GL-S10</a>/<a href="https://www.gl-inet.com/products/gl-s200/">GL-S200</a> oder ähnlich, als BT Gateway. Vielleicht geht das auch über den USB Port, wenn man auf das Tethering verzichtet… Ist noch Zukunft.</li>
</ul>

<hr />

<h1 id="bilder">Bilder</h1>

<p>Der lokale Testaufbau für Referenzwerte am Schreibtisch.<br />
<img src="/media/router_beryl/router_beryl_test.jpg" alt="Testaufbau Desktop" /></p>

<p>Der erste Standort am zentralen Panel. Oben der Router, unten das Netzteil an 230V. Die neben der 230V Landstrom-Steckdose serienmäßig verbaute 12V KFZ-Steckdose habe ich gegen eine 2xUSB (max. 2,1A) Umgebaut.<br />
<img src="/media/router_beryl/router_beryl_panel.jpg" alt="Testaufbau Panel" /></p>

<p>Der Standort über dem Fahrer ist fast perfekt, hat aber nur einen 230V Landstrom Anschluss.<br />
<img src="/media/router_beryl/router_beryl_dach.jpg" alt="Testaufbau Dach" /></p>

<p>Im Zentrum des Buffymobils in der Küche für Testmessungen.<br />
<img src="/media/router_beryl/router_beryl_kueche.jpg" alt="Testaufbau Kueche" /></p>

<p>Hinten in der Bettenlandschaft wurde der Druchsatz nicht signifikant schlechter (ca. 2m weiter weg vom Router). Aber wer will die Strahlung am Kopf?<br />
<img src="/media/router_beryl/router_beryl_bett.jpg" alt="Testaufbau Bett" /></p>

<p>Es wurde an fast jeder Steckdose getestet.<br />
<img src="/media/router_beryl/router_beryl_bad.jpg" alt="Testaufbau Bad" /></p>

<p>Die Box würde ich bei trockenem Wetter ohne Bedenken durch die Dachluke auf das Dach vom BuffyMobil stellen (ggf. mit Geschirrtuch gegen direkte Sonneneinstrahlung), für besseren Empfang. Von den Übertragungswerten im Heimtest bin ich über dem Panel vollkommen zufrieden.<br />
Im 4pfoten-Mobil gibt es hinter dem Beifahrersitz eine Sitzgelegenheit mit einem Schrank drüber. In diesem ist im oberen Fach der SAT Empfänger und der Solar-Laderegler verbaut. Hier kann ich mir gut vorstellen auch den 12V-&gt;5V/3A Spannungswandler einzubauen.<br />
Für WLAN kann von dort ein 2-3m USB-A auf USB-C Kabel in Richtung Panel oder über den Beifahrersitz gelegt werden. Und im Extremfall auch durch die vordere oder mittlere Dachlucke. Für USB-Tethering kann der gleiche Weg benutzt werden um das Telefon/Tablet entsprechend gut zu positionieren. Wobei ein Mobiltelefon empfindlicher in der Sonne ist und sich vermutlich abschaltet.</p>]]></content><author><name>Benjamin Moeller</name></author><category term="wohnmobil" /><category term="reise" /><category term="netzwerk" /><category term="router" /><summary type="html"><![CDATA[tl;dr]]></summary></entry><entry><title type="html">Wohnmobil - Lenkradfernbedienung von Fiat Ducato auf Pioneer DNX451RVS</title><link href="http://blog.lupuse.org/wohnmobil/2021/10/30/Lenkradfernbedienung-Fiat_Ducato-Pioneer_DNX451RVS.html" rel="alternate" type="text/html" title="Wohnmobil - Lenkradfernbedienung von Fiat Ducato auf Pioneer DNX451RVS" /><published>2021-10-30T23:36:59+00:00</published><updated>2021-10-30T23:36:59+00:00</updated><id>http://blog.lupuse.org/wohnmobil/2021/10/30/Lenkradfernbedienung---Fiat_Ducato-Pioneer_DNX451RVS</id><content type="html" xml:base="http://blog.lupuse.org/wohnmobil/2021/10/30/Lenkradfernbedienung-Fiat_Ducato-Pioneer_DNX451RVS.html"><![CDATA[<h2 id="ausgangslage">Ausgangslage</h2>

<p>Meine Frau und ich haben uns ein <a href="https://www.4pfoten-mobile.de/">4pfoten-Mobile - Dog-Liner TE740</a> gekauft, unser BuffyMobil. Dieser teilintegrierte Fiat Ducato X290 hat den Luxus einer Lenkradfernbedienung, aber sie ist nicht mit dem verbauten Radio Kenwood DNX451 verbunden. Unser Verkäufer, <a href="www.4pfoten-mobile.de/neumuenster/">Jörn Zimmermann</a> vom Standort Neumünster, war so nett und hat für uns die fehlenden Teile in Erfahrung gebracht:</p>
<ul>
  <li>Kabelbaum: CAW-CCOMFI1</li>
  <li>Steuerbox: CAW-COMUN2</li>
</ul>

<p>Bei <a href="https://www.toms-car-hifi.de/">Toms-Car-Hifi</a> bestellt, nach 3 Tagen war alles da und die OP konnte beginnen.</p>

<p>Nach dieser Anleitung ist eines klar: Das wird nicht einfach.<br />
<img src="/media/lenkradfb_ducato_dnx451/01_anleitung.png" alt="Anleitung der Verkabelung der CAW-COMUN2 Box" /></p>

<p>Interpretation: Sehr viele schwarze Kabel. Ein schwarzes Kabel der Box muss an einen grünen Adapter vorbei an das schwarze Kabel des Radios, welches mit ‘Steering Wheel Remote’ bezeichnet ist??!??!?! Oder so.<br />
Auf dem Bild oben rechts könnte man erahnen das schwarz auch blau/gelb sein könnte, mit ‘Remo.cont’ beschriftet. Das wird lustig.</p>

<h2 id="das-einbauen-des-adapters-mit-kabelbaum">Das Einbauen des Adapters mit Kabelbaum</h2>
<p>Das Radio im Ausgangszustand<br />
<img src="/media/lenkradfb_ducato_dnx451/02_ausgangslage.png" alt="Das Radio im eingebauten Zustand" /></p>

<p>Beim Aushebeln der Blende brechen sicher ein oder zwei Klemmen ab. Durch das tolle klebrige silber Deko-Element (Pfeil) hält es aber.<br />
Das Radio ist an dem Blech festgeschraubt, nicht eingeschoben. Ich empfehle mit den oberen beiden Schrauben anzufangen und mit schmaler Spitze (PH2) die untern beiden schrauben parallel zu loesen, so dass das Radio nach vorne oben mitkommt. Ansonsten hat man Macken an dem Radio unten rechts und links.<br />
<img src="/media/lenkradfb_ducato_dnx451/03_schrauben.png" alt="Blende offen" /></p>

<p>Was soll ich schreiben? Kabelchaos. Wenn man keine Ahnung von Kabeln/Stecker/Elektronik hat, sollte man spätesten hier aufhören und das Set einem KFZ-kundigen übergeben. Auf jeden Fall die Stromversorgung trennen!<br />
Wenn man schon z.B. einen PC zusammengeschraubt hat, dann trennt man den ISO Stecker (2 Stecker in einem nahezu quadratischen Port) zwischen Radio und Auto und klemmt den Kabelbaum (CAW-CCOMFI1) dazwischen. Der neue Kabelbaum hat eine schwarze schmale Steckerleiste, welche in die Box (CAW-COMUN2) kommt.<br />
<img src="/media/lenkradfb_ducato_dnx451/04_kabelchaos.png" alt="Die Kabel hinter dem Radio. Chaos." /></p>

<p>Nochmal etwas zurechtgelegt, der nicht selbsterklärende Teil:<br />
Der Box (CAW-COMUN2) liegt ein kleines Kabel bei. Der Stecker kommt in das entsprechende Gegenstück des neuen Kabelbaum (CAW-CCOMFI1). Das lose braune Kabel wird mit dem blau/gelb-Kabel des Autoradios verbunden. Den Mini-Klinkenstecker irgendwie isolieren/fixieren, vielleicht eleganter als meine Lösung mit dem weißen Panzertape.<br />
<img src="/media/lenkradfb_ducato_dnx451/05_kabeladapter.png" alt="Der schlecht beschriebene Adapter Kabelbaum-LenkradFB" /></p>

<p>Jetzt muss die Box angelernt werden, <a href="#ablauf">siehe unten</a>. Spart Euch den Schritt frühzeitig alles wieder zusammenzubauen. Ich habe die Box mehrfach neu programmiert, bis es mir gefallen hat.<br />
Das Plastikteil in der Tüte der Box, welches wie abgebrochen aussieht, ist ein Stift, mit den man den Taster in der Box erreicht (siehe rote Markierung).<br />
<img src="/media/lenkradfb_ducato_dnx451/06_box.png" alt="Die Box eingebaut und angeschlossen. Der Button ist erreichbar." /></p>

<p>Beim Zusammenschrauben in umgekerter Reihenfolge: Erst die unteren Schrauben, das Radio langsam mit reingleiten lassen, dann die oberen. Achtet drauf, dass die unteren Schrauben trotz des Winkels auch wirklich fest sind. Das Quietschen vom Radio an der Blende auf Kopfsteinpflaster ist nicht schön.</p>

<h2 id="programmieren-die-anleitung-sagt-">Programmieren. Die Anleitung sagt …</h2>

<ul>
  <li>… Zuendung aktivieren, die Box blinkt.</li>
  <li>Wenn die Box schnell blinkt, kann sofort gestartet werden. Wenn nicht, Reset: ‘Zündung aus, Taste drücken und gedrückt halten, Zündung an. Wenn die LED rot blinkt, Button loslassen.’</li>
  <li>Man drückt eine Taste auf der Lenkradfernbedienung, die Box zeigt mit einem aufleuchten der LED an, dass der Steuerbefehl angenommen wurde.</li>
</ul>

<p>Das ist ja einfach.</p>

<h3 id="folgende-zustände-kann-die-box-anzeigen">Folgende Zustände kann die Box anzeigen</h3>

<table>
  <thead>
    <tr>
      <th>LED Signal</th>
      <th>Bedeutung</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>LED aus</td>
      <td>Kein Strom. Zündung einschalten oder Box mit Strom versorgen</td>
    </tr>
    <tr>
      <td>LED blinkt rot</td>
      <td>Die Box ist im Anlernmodus</td>
    </tr>
    <tr>
      <td>LED blinkt einmal, wenn Taste am Lenkrad gedrückt wurde.</td>
      <td>Befehl wurde erkannt</td>
    </tr>
    <tr>
      <td>LED blinkt einmal, wenn ‘Button’ auf Box gedrückt wurde.</td>
      <td>Funktion wurde übersprungen</td>
    </tr>
    <tr>
      <td>LED blinkt grün</td>
      <td>Kommandos hinterlegt, kein Radioprofil eingestellt</td>
    </tr>
    <tr>
      <td>LED leuchtet grün</td>
      <td>Alles OK, Box ist programmiert</td>
    </tr>
  </tbody>
</table>

<p>Die Box hat 12 Funktionen. Der Ducato hat, abhängig von Baujahr, 6 oder 8 Tasten. Belegen darf jeder wie er will. Zum Beispiel:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">ID</th>
      <th>Funktion der Box</th>
      <th>Meine Belegung</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">1</td>
      <td>Lautstärke -</td>
      <td>Lautstärke -</td>
    </tr>
    <tr>
      <td style="text-align: center">2</td>
      <td>Lautstärke +</td>
      <td>Lautstärke +</td>
    </tr>
    <tr>
      <td style="text-align: center">3</td>
      <td>Suchen -</td>
      <td>Suchen -</td>
    </tr>
    <tr>
      <td style="text-align: center">4</td>
      <td>Suchen +</td>
      <td>Suchen +</td>
    </tr>
    <tr>
      <td style="text-align: center">5</td>
      <td>Quelle</td>
      <td>Leere Taste</td>
    </tr>
    <tr>
      <td style="text-align: center">6</td>
      <td>Stumm</td>
      <td>Stumm</td>
    </tr>
    <tr>
      <td style="text-align: center">7</td>
      <td>Hoch</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">8</td>
      <td>Sprachbefehl</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">9</td>
      <td>Anruf annehmen</td>
      <td>Anruf annehmen</td>
    </tr>
    <tr>
      <td style="text-align: center">10</td>
      <td>Anruf beenden</td>
      <td>Anruf beenden</td>
    </tr>
    <tr>
      <td style="text-align: center">11</td>
      <td>X</td>
      <td> </td>
    </tr>
    <tr>
      <td style="text-align: center">12</td>
      <td>X</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<h2 id="-praktisches-anlernen-der-box"><a name="ablauf"></a> Praktisches Anlernen der Box</h2>
<ul>
  <li>Box in Programmiermodus bringen (Entweder im Auslieferungszustand oder nach Reset: Zündung aus -&gt; Button an der Box gedrückt halten. Zündung an. Wenn die LED rot blinkt -&gt; Button loslassen.)</li>
  <li>An der Lenkradfernbedienung ‘Lautstärke +’ drücken, die Box blinkt einmal rot</li>
  <li>An der Lenkradfernbedienung ‘Lautstärke -‘ drücken, die Box blinkt einmal rot</li>
  <li>An der Lenkradfernbedienung ‘Wippe rechts nach unten’ drücken, die Box blinkt einmal rot</li>
  <li>An der Lenkradfernbedienung ‘Wippe rechts nach oben’ drücken, die Box blinkt einmal rot</li>
  <li>An der Lenkradfernbedienung ‘Leere Taste (links unten)’ drücken, die Box blinkt einmal rot</li>
  <li>An der Lenkradfernbedienung ‘Durchgestrichenen Lautsprecher’ drücken, die Box blinkt einmal rot</li>
  <li>Auf der Box einmal den Button drücken (7 überspringen), die Box blinkt einmal rot</li>
  <li>Auf der Box einmal den Button drücken (8 überspringen), die Box blinkt einmal rot</li>
  <li>An der Lenkradfernbedienung ‘Telefon annehmen’ drücken, die Box blinkt einmal rot</li>
  <li>An der Lenkradfernbedienung ‘Telefon auflegen’ drücken, die Box blinkt einmal rot</li>
  <li>Auf der Box einmal den Button drücken (11 überspringen), die Box blinkt einmal rot</li>
  <li>Auf der Box einmal den Button drücken (12 überspringen), die Box blinkt grüen</li>
  <li>Radioprotokoll auswählen: ‘Suchen +’ drücken</li>
</ul>

<h3 id="lenkradfernbedienung---tasten">Lenkradfernbedienung - Tasten</h3>

<p><img src="/media/lenkradfb_ducato_dnx451/07_lenkrad-ducato.jpg" alt="Fiat Ducato - Lenkradfernbedienung Tasten" /></p>

<table>
  <thead>
    <tr>
      <th style="text-align: right">Tasten links</th>
      <th style="text-align: center">Mitte</th>
      <th style="text-align: left">Tasten rechts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: right">Stumm</td>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Tel Annehmen</td>
    </tr>
    <tr>
      <td style="text-align: right">Lautstärke +</td>
      <td style="text-align: center">Hupe</td>
      <td style="text-align: left">Suchen +</td>
    </tr>
    <tr>
      <td style="text-align: right">Lautstärke -</td>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Suchen -</td>
    </tr>
    <tr>
      <td style="text-align: right">Leer</td>
      <td style="text-align: center"> </td>
      <td style="text-align: left">Tel Beenden</td>
    </tr>
  </tbody>
</table>

<h2 id="fazit">Fazit</h2>

<p>Die Box war das Geburtstagsgeschenk 2021 an mich von meiner Frau, als wegen Corona alles zu hatte. So konnten wir die Funktion zwar nicht sofort testen, aber ich konnte am Wohnmobil basteln.<br />
Jetzt, nach einigen Fahrten, muss ich sagen der Mehrwert ist gewaltig. Es handelt sich immernoch um einen Transporter, das heisst es ist nicht zu vergleichen mit dem Multimediacockpit eines Mini Cooper oder BMW, aber man muss nicht mehr in die Mitte greifen und versuchen per Touch das richtige Feld zu treffen.<br />
Das Radio hat seine Schwächen, aber das Telefonieren per Bluetooth auf Landstrasse und Autobahn funktioniert sehr gut. Auch hier ist Lenkradfernbedienung ein deutlicher Mehrwert.</p>

<p>Es gibt per Amazon auch Boxen, welche etwa ein drittel der orignalen Lösung kosten. Von denen habe ich ersteinmal abstand genommen, denn in meinem Urlaub soll es funktionieren. Wenn jemand Erfahrungne mit diesen 3rd Party Lösungen aus China hat, bin ich sehr an einem Erfahrungsbericht interessiert.</p>

<h1 id="update">Update</h1>

<p>Da die Lenkradfernbedienung nach einiger Zeit immer unzuverlässier funktionierte und ich die Panzertape-Konstruktion vermutete, habe ich am 25.03. das Tape gegen eine Wago-Klemme getauscht.<br />
<img src="/media/lenkradfb_ducato_dnx451/08_kabeladapter_wago.png" alt="Die Verkabelung mit Wago-Klemme" /></p>

<p>Jetzt funktioniert es wieder zu 100%, wie beim Testen.</p>

<p>Es gibt alte Wago klemmen (grau mit schmaleren orangenen Hebeln) und neue (transparent mit flachen Hebeln, wie auf dem Bild).<br />
Es ist egal welche genommen werden, hauptsache original. Ich habe die neueren genommen, weil diese deutlich flacher sind.</p>]]></content><author><name>Benjamin Moeller</name></author><category term="wohnmobil" /><category term="UnterwegsZuhause" /><summary type="html"><![CDATA[Ausgangslage]]></summary></entry></feed>