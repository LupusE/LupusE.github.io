<!DOCTYPE html>
<html lang="en">
  <!-- Beautiful Jekyll | MIT license | Copyright Dean Attali 2016 -->
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">

  <title>OpenStack - erstes Hinfallen</title>

  <meta name="author" content="Benjamin Moeller" />

  

  <link rel="alternate" type="application/rss+xml" title="LupusE Weblife - Ein Platz fuer geistige Ejakulationen und bedeutungsschwangere Worte" href="https://blog.lupuse.org/feed.xml" />

  

  

  


  
    
      
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" />


    
  

  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
  

  
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

  

  

  

    <!-- Facebook OpenGraph tags -->
  

  
  <meta property="og:title" content="OpenStack - erstes Hinfallen" />
  

   
  <meta property="og:description" content="Erste Schritte und harte Landungen Es ist keine gute Idee zwei unbekannte Techniken auf einmal zu verwenden, bei drei Techniken kann an davon ausgehen, dass die Zeit bis zum ersten Erfolg länger dauern kann, als das Installieren einer Technik allein. Neue Themen: Ubuntu Server und Snap LVM Linux container (lxd)...">
  


  <meta property="og:type" content="website" />

  
  <meta property="og:url" content="https://blog.lupuse.org/2019-03-12-openstack-erstes-hinfallen/" />
  <link rel="canonical" href="https://blog.lupuse.org/2019-03-12-openstack-erstes-hinfallen/" />
  

  


  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <meta name="twitter:creator" content="@" />

  
  <meta name="twitter:title" content="OpenStack - erstes Hinfallen" />
  

  
  <meta name="twitter:description" content="Erste Schritte und harte Landungen Es ist keine gute Idee zwei unbekannte Techniken auf einmal zu verwenden, bei drei Techniken kann an davon ausgehen, dass die Zeit bis zum ersten Erfolg länger dauern kann, als das Installieren einer Technik allein. Neue Themen: Ubuntu Server und Snap LVM Linux container (lxd)...">
  

  

  

  

</head>


  <body>

    

  
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button><a class="navbar-brand" href="https://blog.lupuse.org/">LupusE Weblife</a></div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
          <li><a href="/aboutme">Über mich</a></li>
          <li class="navlinks-container">
            <a class="navlinks-parent" href="javascript:void(0)">Resources</a>
            <div class="navlinks-children">
              <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a>
              <a href="http://www.markdowntutorial.com/">Learn markdown</a>
              <a href="https://pages.github.com/">GitHub Pages</a>
            </div>
          </li>
        
          <li><a href="http://lupuse.org">Webseite</a></li></ul>
    </div>

	

  </div>
</nav>


    <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-heading">
          <h1>OpenStack - erstes Hinfallen</h1>
		  
		  
		  
		  <span class="post-meta">Posted on March 12, 2019</span>
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

      

      <article role="main" class="blog-post">
        <h1 id="erste-schritte-und-harte-landungen">Erste Schritte und harte Landungen</h1>
<p>Es ist keine gute Idee zwei unbekannte Techniken auf einmal zu verwenden, bei drei Techniken kann an davon ausgehen, dass die Zeit bis zum ersten Erfolg länger dauern kann, als das Installieren einer Technik allein. Neue Themen:</p>
<ol>
  <li>Ubuntu Server und Snap</li>
  <li>LVM</li>
  <li>Linux container (lxd)</li>
  <li>(conjure-up)</li>
</ol>

<h2 id="hallo-lucy">Hallo Lucy</h2>
<p>Der (für mich) neue ncurses Dialog ist etwas gewöhnungsbedürftig, aber angenehm zu lesen und Schritt-für-Schritt sinnvoll aufgebaut.</p>

<p>Der Ubuntu Server lässt sich recht schnell und sehr bequem installieren. Als Default wurde ‘Gesamte Festplatte verwenden’ vorgeschlagen. Das reicht mir nicht, ich wollte ‘Gesamte Festplatte verwenden und LVM einrichten’. LVM kenne ich noch aus alten Zeiten, und so konnten wir bequem virtuelle Festplatten von 100G bis 6T verteilen, ohne dass ein Neustart der Umgebung oder VM notwendig war. Das klingt verlockend für mein Projekt.</p>

<p>Netzwerk konfigurieren, ersten Benutzer eingeben … das Übliche halt.<br />
Aber was war an dem alten eth0 falsch? Okay, anstelle einer halb zufälligen Bezeichnung haben wir nun eine Bezeichnung nach Steckplatz im System. Da es auch kein <code class="highlighter-rouge">ifconfig</code> mehr gibt, sondern <code class="highlighter-rouge">ip a</code>, ist die Umgewöhnung vermutlich einfacher als ich gerade denke. Wer soll sich nur <code class="highlighter-rouge">ip a show dev enp5s0</code> merken?</p>

<p>Das mit LVM eingerichtete Ubuntu denkt 4GB sind genug für / (root). Damit bricht jeder conjure spell ab. Lösung:
Die Fehlermeldung selbst war nicht sehr aufschlussreich:</p>
<blockquote>
  <p>exception=BootstrapError(‘Unable to bootstrap (cloud type: localhost)’,)&gt;</p>
</blockquote>

<p>Lösung:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>lvextend <span class="nt">-L</span>+50G /dev/mapper/ubuntu--vg-ubuntu--lv
<span class="nv">$ </span><span class="nb">sudo </span>resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv
</code></pre></div></div>
<p>Hiermit wird das ‘Linux Volume’ für / um 50GB vergrößert und ist dann 54GB groß. Der Zweite Befehl passt das Dateisystem (ext2|3|4) darauf an.
Mit <code class="highlighter-rouge">df -h</code> lässt sich testen ob das Vorhaben geklappt hat.</p>

<h2 id="veraltetes-linux-container-gegen-aktuelles-linux-container-tauschen">Veraltetes ‘linux container’ gegen aktuelles ‘Linux container’ tauschen</h2>
<p>Wir rufen uns in das Gedächtnis was eine Distribution ist: Eine Sammlung von Paketen um einen Kernel (Betriebssystem), welche über einen Paketmanager einfach zu bedienen ist.<br />
Ubuntu Server hat <a href="https://linuxcontainers.org/">Linux containers (LXD)</a> vorinstalliert. Was in diversen Situationen sicher hilfreich ist, kann uns hier zum Verhängnis werden. Lösung:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>apt purge lxd lxd-client
</code></pre></div></div>

<p>Wir starten mit dem Einrichten von lxd. Wir bedienen uns der snap Version.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>snap install lxd
</code></pre></div></div>

<p>Zur Sicherheit kontrollieren wir, ob die richtige Version aktiv ist:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>which lxc
/snap/bin/lxc
</code></pre></div></div>
<p>Falsch an dieser Stelle wäre /usr/bin/lxc.</p>

<p>Der erste Benutzer sollte in der Gruppe lxd sein, aber hier noch einmal das Vorgehen:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>usermod <span class="nt">-a</span> <span class="nt">-G</span> lxd <span class="nv">$USER</span>
<span class="nv">$ </span>newgrp lxd
</code></pre></div></div>
<p>Nach dem nächsten anmelden kann mit dem Befehl <code class="highlighter-rouge">id</code> kontrolliert werden, ob man in der Gruppe ist.</p>

<p>Die Umgebung erstellen wir mit <code class="highlighter-rouge">lxc init</code>. Hier gibt es zwei wichtige Unterschiede zum Default:</p>
<ol>
  <li>OpenStack kann nur mit dem Dateisystem ‘dir’ um. Die Voreinstellung ‘btrfs’ führt zu Fehlern.</li>
  <li>OpenStack kann kein IPv6, hier muss ‘none’ eingegeben werden.</li>
</ol>

<h2 id="zusammenfassung">Zusammenfassung</h2>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>apt purge lxd lxd-client<span class="p">;</span> <span class="nb">sudo </span>snap install lxd<span class="p">;</span> lxd init
</code></pre></div></div>
<blockquote>
  <p>Das Deinstallieren der veralteten Version der ‘Linux container’ aus apt, und installieren der neueren Version aus snap. Im Anschluss die Umgebung einrichten
An dieser Stelle auf keinen Fall vergessen <em>dir</em> als Dateisystem und <em>none</em> bei IPv6.</p>
</blockquote>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>lvextend <span class="nt">-L</span>+50G /dev/mapper/ubuntu--vg-ubuntu--lv<span class="p">;</span> <span class="nb">sudo </span>resize2fs /dev/mapper/ubuntu--vg-ubuntu--lv
</code></pre></div></div>
<blockquote>
  <p>Je nachdem wie viel Speicher zur Verfügung steht können die 50G angepasst werden. Sehr viel weniger sollt es nicht sein.</p>
</blockquote>

<h1 id="lasst-die-spiele-beginnen">Lasst die Spiele beginnen!</h1>
<p>Die Magie macht für uns conjure-up.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>conjure-up
</code></pre></div></div>

<p>Ab hier gibt es genug Anleitungen über Google. Die ersten Fallstricke müsst ihr mir nicht nachmachen.<br />
je nach Ausstattung werden hier mehrere Stunden benötigt. Der Vorteil: Das System macht alles alleine. Fehler werden meist recht früh sichtbar.</p>

<p>Die traurige Realität: das ist erst die Infrastruktur. Es existiert noch kein einziger Service für die Welt.</p>

<h1 id="edit">Edit</h1>
<p>Ein i3 (2 Cores) mit 8GB Ram und 150GB drehender HDD ist vielleicht super Stromsparend, aber nicht genug Blech fuer OpenStack.<br />
Beim installieren schwankte die Load zwischen 600 und 1200. Die Install ist abgebrochen mit einem Timeout zwischen dne Services und nach einem Neustart pendelt die Load zwischen 25 und 162 …</p>

<p>Minimum Requirements sind aktuell  Cores, 16 GB RAM, 32GB SWAP (SSD recommended) und 100GB Platz. Offensichtlich nicht ohne Grund.<br />
Ich weis nicht, wie andere Testumgebungen auf dne Laptops installieren. Scheinbar gibt es noch einen anderne Trick…</p>

<p><em>Mic drop Geräusch</em></p>

      </article>

      
        <div class="blog-tags">
          Tags:
          
          
            <a href="/tags#qnd">qnd</a>
          
          
        </div>
      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
  <!--- Share on Twitter -->
    <a href="https://twitter.com/intent/tweet?text=OpenStack+-+erstes+Hinfallen&url=https%3A%2F%2Fblog.lupuse.org%2F2019-03-12-openstack-erstes-hinfallen%2F"
      class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fa fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  
  <!--- Share on Facebook -->
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fblog.lupuse.org%2F2019-03-12-openstack-erstes-hinfallen%2F"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fa fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  
  <!--- Share on LinkedIn -->
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fblog.lupuse.org%2F2019-03-12-openstack-erstes-hinfallen%2F"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fa fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

</section>



      

      <ul class="pager blog-pager">
        
        <li class="previous">
          <a href="/2019-02-14-valentinstag-und-die-reparaturen/" data-toggle="tooltip" data-placement="top" title="Valentinstag und die Reparaturen">&larr; Previous Post</a>
        </li>
        
        
        <li class="next">
          <a href="/2019-03-23-Snaptain-Drohne/" data-toggle="tooltip" data-placement="top" title="Snaptain Drohne">Next Post &rarr;</a>
        </li>
        
      </ul>

      
        <div class="disqus-comments">
          

        </div>
          
        <div class="staticman-comments">
          

        </div>
        <div class="justcomments-comments">
          
        </div>
      
    </div>
  </div>
</div>


    <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links"><li><a href="/feed.xml" title="RSS"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">RSS</span>
              </a>
            </li><li><a href="mailto:git@lupuse.org" title="Email me"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Email me</span>
              </a>
            </li><li><a href="https://www.facebook.com/LupusE" title="Facebook"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Facebook</span>
              </a>
            </li><li><a href="https://github.com/LupusE" title="GitHub"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">GitHub</span>
              </a>
            </li><li><a href="https://twitter.com/LupusE42" title="Twitter"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Twitter</span>
              </a>
            </li><li><a href="https://linkedin.com/in/benjamin-moeller-95455472" title="LinkedIn"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">LinkedIn</span>
              </a>
            </li><li><a href="https://www.xing.com/profile/Benjamin_Moeller" title="Xing"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-xing fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Xing</span>
              </a>
            </li><li><a href="https://stackoverflow.com/users/9601986/lupuse" title="StackOverflow"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">StackOverflow</span>
              </a>
            </li><li><a href="https://steamcommunity.com/id/LupusE" title="Steam"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-steam fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Steam</span>
              </a>
            </li><li><a href="lupuse" title=""><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa  fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only"></span>
              </a>
            </li></ul>
      <p class="copyright text-muted">
      Benjamin Moeller
      &nbsp;&bull;&nbsp;
      2019

      
      &nbsp;&bull;&nbsp;
      <a href="https://blog.lupuse.org/">blog.lupuse.org</a>
      

      
      </p>
          <!-- Please don't remove this, keep my open source work credited :) -->
    <p class="theme-by text-muted">
      Theme by
      <a href="https://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
    </p>
      </div>
    </div>
  </div>
</footer>

  
    






  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
      	if (typeof jQuery == 'undefined') {
          document.write('<script src="/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
      	}
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/js/main.js"></script>
    
  


  
  </body>
</html>
